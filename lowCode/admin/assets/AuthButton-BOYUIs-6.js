import{r as p,u as f,c as k,j as w,B as A}from"./index-BrD5sXbN.js";import{s as l,m as M,r as B}from"./Page-xyqr89RQ.js";import"./pageStore-D-Vypx31.js";import"./util-DHOYMMeV.js";import"./DoubleRightOutlined-BBqvPxX4.js";import"./index-BTJ7lNGW.js";import"./index-CiNuIwYW.js";import"./index-QqHQ6VDD.js";import"./tslib.es6-DQF7CiZa.js";import"./index-D8qpNAOl.js";import"./index-F3O87iVt.js";const g=t=>w.jsx(A,{...t,onClick:t.onClick,children:t.children});function y({authCode:t,authScript:o,...s}){const[c,m]=p.useState(""),[u,d]=p.useState([]),{projectId:e,id:a}=f(),{pathname:r}=k();p.useEffect(()=>{if(!e||!t)return;const n=l.get("buttons")||[],b=l.get("pageMap");d(n);const j=r.split(e)[1].slice(1),x=M(j,b),I=e+"_"+x+"_"+t;m(I)},[r,t]);const i=n=>w.jsx(A,{...n,onClick:n.onClick,children:n.children});return!t||a&&!window.microApp||e&&t&&u.find(n=>n.code===c)||o&&a&&B(o.value,{authCode:t})?i(s):null}const z=({authCode:t,authScript:o,...s})=>{var r;const{projectId:c,pageId:m,id:u}=f(),d=l.get("buttons")||[],e=l.get("pageMap"),a=c+"_"+((r=e[Number(m)])==null?void 0:r.id)+"_"+t;return!t||u&&!window.microApp||c&&t&&d.find(i=>i.code===a)||o&&u&&B(o.value,{authCode:t})?g(s):null};export{y as default,z as genAuthButton};
