import{r as t,j as u}from"./index-DzwVQ2UK.js";import{h as C,k as D}from"./Page-B4H8Li0A.js";import{useFormContext as E}from"./context-wT84Xe1v.js";import{u as I}from"./pageStore-CahLOgRM.js";import{F as W}from"./index-Cr1Ff2Du.js";import"./util-D3GCZG9x.js";import"./DoubleRightOutlined-oEBZ4Nyz.js";import"./index-ytCQesj7.js";import"./tslib.es6-TvfGtUkn.js";import"./index-Bvso4piW.js";import"./index-Ce96gYJJ.js";import"./index-Bz8JGjyY.js";const j=({type:n,config:a,onChange:o},f)=>{var d;const{initValues:b}=E(),[c,p]=t.useState([]),[v,m]=t.useState(!0),[h,s]=t.useState(),x=I(e=>e.page.pageData.variableData);t.useEffect(()=>{var l;const e=(l=a.props.formItem)==null?void 0:l.name,r=a.props.defaultValue;b(n,e,r)},[a.props.defaultValue]),t.useEffect(()=>{typeof a.props.formWrap.disabled=="boolean"&&s(a.props.formWrap.disabled)},[a.props.formWrap.disabled]),t.useEffect(()=>{i({})},[a.api,((d=a.api)==null?void 0:d.sourceType)=="variable"?x:""]);const i=e=>{C(a.api,e).then(r=>{(r==null?void 0:r.code)===0&&(Array.isArray(r.data)?p(r.data):(console.error("[Cascader]","data数据格式错误，请检查"),p([])))})};t.useImperativeHandle(f,()=>({show(){m(!0)},hide(){m(!1)},enable(){s(!1)},disable(){s(!0)},update:e=>{i(e)}}));const y=e=>{o&&o({[a.props.formItem.name]:e})};return v&&u.jsx(W.Item,{...a.props.formItem,children:u.jsx(D,{...a.props.formWrap,disabled:h,variant:a.props.formWrap.variant||void 0,options:c,style:{...a.style},onChange:e=>y(e)})})},$=t.forwardRef(j);export{$ as default};
