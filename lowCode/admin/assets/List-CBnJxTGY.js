import{r as n,j as s,B as b,R as E}from"./index-BrD5sXbN.js";import{i as I}from"./index-Btp2qndV.js";import{h as M,F as i,A as N,f as h,z as x,E as y,e as R}from"./Page-xyqr89RQ.js";import{u as Y}from"./pageStore-D-Vypx31.js";import"./DoubleRightOutlined-BBqvPxX4.js";import"./index-BTJ7lNGW.js";import"./util-DHOYMMeV.js";import"./index-F3O87iVt.js";import"./LockOutlined-CXcM9Ypx.js";import"./UserOutlined-ueenOKIG.js";import"./index-CiNuIwYW.js";import"./index-QqHQ6VDD.js";import"./tslib.es6-DQF7CiZa.js";import"./index-D8qpNAOl.js";const w=({config:t},v)=>{var u;const[j,l]=n.useState([]),[A,d]=n.useState(!0),D=Y(r=>r.page.pageData.variableData);n.useEffect(()=>{m({})},[t.api,((u=t.api)==null?void 0:u.sourceType)=="variable"?D:""]);const m=r=>{M(t.api,r).then(e=>{(e==null?void 0:e.code)===0&&(Array.isArray(e.data)?l(e.data):(console.error("[List]","data数据格式错误，请检查"),l([])))})};n.useImperativeHandle(v,()=>({show(){d(!0)},hide(){d(!1)},update:r=>{m(r)}}));const L=r=>{var p;const e=r[(p=t.props.content)==null?void 0:p.name],a=t.props.content.type;if(!e||!a||a==="text")return e;if(a==="money")return h(e,"currency");if(a==="number")return h(e);if(a==="date1")return x(e,"YYYY-MM-DD");if(a==="date2")return x(e);if(a==="tag")return Array.isArray(e)?e.map((o,c)=>s.jsx(y,{children:o},c)):typeof e=="string"||typeof e=="number"?s.jsx(y,{children:e}):e==null?void 0:e.toString()},f=(r,e={})=>{const a=t.events.find(p=>p.eventName===r);R(a==null?void 0:a.actions,e)},S=I;return A&&s.jsx(i,{style:t.style,bordered:t.props.bordered,size:t.props.size,split:t.props.split,header:s.jsx("div",{children:t.props.header}),footer:s.jsx("div",{children:t.props.footer}),dataSource:j,renderItem:r=>{var e,a,p;return s.jsxs(i.Item,{actions:((e=t.props.bulkActionList)==null?void 0:e.map((o,c)=>s.jsx(b,{type:o.type,danger:o.danger,icon:o.icon?E.createElement(S[o.icon]):null,onClick:()=>f(o.eventName,r),children:o.text},o.eventName)))||[],children:[s.jsx(i.Item.Meta,{avatar:t.props.avatar?s.jsx(N,{src:r[t.props.avatar]}):null,title:(a=t.props.title)!=null&&a.name?s.jsx("span",{style:{color:t.props.title.color},children:r[t.props.title.name]}):null,description:t.props.desc.name?s.jsx("span",{style:{color:t.props.desc.color},children:r[t.props.desc.name]}):null}),(p=t.props.content)!=null&&p.name?s.jsx("div",{style:{color:t.props.content.color},children:L(r)}):null]})}})},K=n.forwardRef(w);export{K as default};
