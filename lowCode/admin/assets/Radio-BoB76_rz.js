import{r,j as n}from"./index-DzwVQ2UK.js";import{h as j,i as v,R as S}from"./Page-B4H8Li0A.js";import{useFormContext as V}from"./context-wT84Xe1v.js";import{u as W}from"./pageStore-CahLOgRM.js";import{F as A}from"./index-Cr1Ff2Du.js";import"./util-D3GCZG9x.js";import"./DoubleRightOutlined-oEBZ4Nyz.js";import"./index-ytCQesj7.js";import"./tslib.es6-TvfGtUkn.js";import"./index-Bvso4piW.js";import"./index-Ce96gYJJ.js";import"./index-Bz8JGjyY.js";const F=({type:y,config:a,onChange:o},x)=>{var u;const[D,d]=r.useState([]),{initValues:E}=V(),[R,i]=r.useState(!0),[c,l]=r.useState(),h=W(e=>e.page.pageData.variableData);r.useEffect(()=>{var s;const e=(s=a.props.formItem)==null?void 0:s.name,t=a.props.defaultValue;E(y,e,t)},[a.props.defaultValue]),r.useEffect(()=>{typeof a.props.formWrap.disabled=="boolean"&&l(a.props.formWrap.disabled)},[a.props.formWrap.disabled]),r.useEffect(()=>{m({})},[a.api,((u=a.api)==null?void 0:u.sourceType)=="variable"?h:""]);const m=e=>{j(a.api,e).then(t=>{if((t==null?void 0:t.code)===0)if(!Array.isArray(t.data))console.error("[radio]","data数据格式错误，请检查"),d([]);else{let s=[];a.props.field.label==="label"&&a.props.field.value==="value"?(s=t.data,(typeof t.data[0]=="string"||typeof t.data[0]=="number")&&(s=t.data.map(p=>({label:p,value:p})))):s=t.data.map(p=>{const b=p[a.props.field.label||"label"],f=p[a.props.field.value||"value"];return{label:v(b)?b:"-",value:v(f)?f:""}}),d(s)}})};r.useImperativeHandle(x,()=>({show(){i(!0)},hide(){i(!1)},enable(){l(!1)},disable(){l(!0)},update:e=>{m(e)}}));const I=e=>{o==null||o({[a.props.formItem.name]:e})};return R&&n.jsx(A.Item,{...a.props.formItem,children:n.jsx(S.Group,{...a.props.formWrap,disabled:c,options:D,style:a.style,onChange:e=>I(e.target.value)})})},B=r.forwardRef(F);export{B as default};
