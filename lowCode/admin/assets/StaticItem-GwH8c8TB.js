import{r as m,j as s,m as y}from"./index-BrD5sXbN.js";import{v as c,d as o,f as d,I as h}from"./Page-xyqr89RQ.js";import{useFormContext as p}from"./context-D17HXmSO.js";import{F as x}from"./index-CiNuIwYW.js";import"./pageStore-D-Vypx31.js";import"./util-DHOYMMeV.js";import"./DoubleRightOutlined-BBqvPxX4.js";import"./index-BTJ7lNGW.js";import"./tslib.es6-DQF7CiZa.js";import"./index-QqHQ6VDD.js";import"./index-D8qpNAOl.js";import"./index-F3O87iVt.js";const j=({type:e,config:t},r)=>{const{initValues:a}=p(),[l,i]=m.useState(!0);return m.useEffect(()=>{var n;const f=(n=t.props.formItem)==null?void 0:n.name,u=t.props.defaultValue;a(e,f,u)},[t.props.defaultValue]),m.useImperativeHandle(r,()=>({show(){i(!0)},hide(){i(!1)}})),l&&s.jsx(x.Item,{...t.props.formItem,children:s.jsx(I,{...t.props.formWrap,name:t.props.formItem.name,style:t.style})})},I=e=>{const t=e.value||"";let r=t;if(c(t))return s.jsx("span",{style:e.style,children:e.emptyType});if(e.showType==="text"&&(e.dateType&&(r=o(t).format(e.dateType)),e.numberType&&(r=d(t,e.numberType)),t!=null&&t.format&&(r=o(t).format())),e.script)try{r=new Function("value",`return (${e.script})(value);`)(r)}catch(a){console.error("脚本解析失败",a),y.error(JSON.stringify(a))}if(r=r==null?void 0:r.toString(),e.showType==="text")return s.jsx("span",{style:e.style,children:r});if(e.showType==="href")return s.jsx("a",{href:r,target:"_blank",style:e.style,children:r});if(e.showType==="image")return s.jsx(h,{src:r,style:e.style})},C=m.forwardRef(j);export{C as default};
