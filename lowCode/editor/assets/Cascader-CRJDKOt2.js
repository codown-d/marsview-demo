import{r as e,a as D,j as n}from"./index-DmOc0qNU.js";import{handleApi as E}from"./handleApi-CJLwph67.js";import{useFormContext as I}from"./context-CwFBKCg9.js";import{F as W}from"./index-1_6nT-oA.js";import{C as j}from"./index-DfZhUM4Q.js";import"./request-C0MTnMVW.js";import"./util-DNkFm-j2.js";import"./index-C0E5Fhz-.js";import"./_baseGet-xRkAGEE7.js";import"./row-pIc0FM19.js";import"./QuestionCircleOutlined-Dza1yYuv.js";import"./useShowArrow-CIjY5B73.js";import"./List-BV6fBbjc.js";import"./index-wVmnK_0F.js";import"./useIcons-CLAJNkrF.js";import"./DownOutlined-DnWdyoG8.js";import"./SearchOutlined-DscCkqW9.js";import"./conductUtil-wNhCxpcs.js";import"./useVariants-BdxfBOl3.js";import"./index-B2mTmS5H.js";const S=({id:f,type:o,config:a,onChange:p},b)=>{var l;const{initValues:c}=I(),[v,m]=e.useState([]),[h,i]=e.useState(!0),[x,s]=e.useState(),y=D(t=>t.page.pageData.variableData);e.useEffect(()=>{var u;const t=(u=a.props.formItem)==null?void 0:u.name,r=a.props.defaultValue;c(o,t,r)},[a.props.defaultValue]),e.useEffect(()=>{typeof a.props.formWrap.disabled=="boolean"&&s(a.props.formWrap.disabled)},[a.props.formWrap.disabled]),e.useEffect(()=>{d({})},[a.api,((l=a.api)==null?void 0:l.sourceType)=="variable"?y:""]);const d=t=>{E(a.api,t).then(r=>{(r==null?void 0:r.code)===0&&(Array.isArray(r.data)?m(r.data):(console.error("[select]","data数据格式错误，请检查"),m([])))})};e.useImperativeHandle(b,()=>({show(){i(!0)},hide(){i(!1)},enable(){s(!1)},disable(){s(!0)},update:t=>{d(t)}}));const C=t=>{p&&p({[a.props.formItem.name]:t})};return h&&n.jsx(W.Item,{...a.props.formItem,"data-id":f,"data-type":o,children:n.jsx(j,{...a.props.formWrap,disabled:x,variant:a.props.formWrap.variant||void 0,options:v,style:{...a.style},onChange:t=>C(t)})})},Q=e.forwardRef(S);export{Q as default};
