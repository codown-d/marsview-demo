import{r as e,a as D,j as n}from"./index-CY1Ymj4r.js";import{handleApi as E}from"./handleApi-Bz3x1xZ4.js";import{useFormContext as I}from"./context-lPMLs1NY.js";import{F as W}from"./index-BKDg-K48.js";import{C as j}from"./index-CksWDIx9.js";import"./request-K5LtYnQH.js";import"./util-UBnOudtO.js";import"./index-yDMkoRSw.js";import"./_baseGet-C1wBFXxd.js";import"./row-C5ps4gU6.js";import"./QuestionCircleOutlined-TTJW15q1.js";import"./useShowArrow-C9phI0pM.js";import"./List-CfIaGhIa.js";import"./index-DYezmHfp.js";import"./useIcons-CYuILU2n.js";import"./DownOutlined-QYs-kCMH.js";import"./SearchOutlined-DZ2l1XJ5.js";import"./conductUtil-oPofkrzY.js";import"./useVariants-B4R8rkTL.js";import"./index-CMyR3-Rp.js";const S=({id:f,type:o,config:a,onChange:p},b)=>{var l;const{initValues:c}=I(),[v,m]=e.useState([]),[h,i]=e.useState(!0),[x,s]=e.useState(),y=D(t=>t.page.pageData.variableData);e.useEffect(()=>{var u;const t=(u=a.props.formItem)==null?void 0:u.name,r=a.props.defaultValue;c(o,t,r)},[a.props.defaultValue]),e.useEffect(()=>{typeof a.props.formWrap.disabled=="boolean"&&s(a.props.formWrap.disabled)},[a.props.formWrap.disabled]),e.useEffect(()=>{d({})},[a.api,((l=a.api)==null?void 0:l.sourceType)=="variable"?y:""]);const d=t=>{E(a.api,t).then(r=>{(r==null?void 0:r.code)===0&&(Array.isArray(r.data)?m(r.data):(console.error("[select]","data数据格式错误，请检查"),m([])))})};e.useImperativeHandle(b,()=>({show(){i(!0)},hide(){i(!1)},enable(){s(!1)},disable(){s(!0)},update:t=>{d(t)}}));const C=t=>{p&&p({[a.props.formItem.name]:t})};return h&&n.jsx(W.Item,{...a.props.formItem,"data-id":f,"data-type":o,children:n.jsx(j,{...a.props.formWrap,disabled:x,variant:a.props.formWrap.variant||void 0,options:v,style:{...a.style},onChange:t=>C(t)})})},Q=e.forwardRef(S);export{Q as default};
