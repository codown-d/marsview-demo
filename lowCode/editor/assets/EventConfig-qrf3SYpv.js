import{r as T,j as o,E as Ct,a as H,i as tt,B as de,dl as le,dY as ee,m as G,D as Tt}from"./index-DmOc0qNU.js";import{F as y}from"./index-1_6nT-oA.js";import{M as nt}from"./index-_pMv_sKm.js";import{I as L}from"./index-B-YUPJxN.js";import{D as I}from"./index-Do4qj9dd.js";import{R as N}from"./index-DxJl0Bxc.js";import{S as k}from"./index-DSaINUG7.js";import{T as Te}from"./index-o7l-rjNw.js";import{S as zt}from"./SettingModal-DRclkpPm.js";import{R as Dt}from"./SettingOutlined-CGW_ik-t.js";import{V as se}from"./VariableBind-alrlGhmD.js";import{T as ze}from"./index-CAhQjzfH.js";import{V as rt}from"./VsEditor-DbAzcx7k.js";import{R as De}from"./PlusOutlined-BSTEPWl7.js";import{R as Nt}from"./MinusOutlined-Cj88Lgeh.js";import{R as it}from"./DeleteOutlined-BnUSKaGo.js";import{D as kt,A as At}from"./index-CcJLco_Z.js";import"./row-pIc0FM19.js";import"./QuestionCircleOutlined-Dza1yYuv.js";import"./index-DOHCQObp.js";import"./BaseInput-4F0kfgVN.js";import"./TextArea-D7VuO_-I.js";import"./useVariants-BdxfBOl3.js";import"./EyeInvisibleOutlined-Cl_PTdo5.js";import"./EyeOutlined-QFSiY36E.js";import"./SearchOutlined-DscCkqW9.js";import"./index-B5-G8EA2.js";import"./useShowArrow-CIjY5B73.js";import"./List-BV6fBbjc.js";import"./index-wVmnK_0F.js";import"./useIcons-CLAJNkrF.js";import"./DownOutlined-DnWdyoG8.js";import"./UpOutlined-CkYvBYD1.js";import"./NotificationOutlined-DlRBMYlM.js";import"./InfoCircleOutlined-D9lj3ic_.js";import"./index-Dg1x3Ybx.js";import"./index-B6d_3ZHh.js";import"./conductUtil-wNhCxpcs.js";import"./PlusSquareOutlined-D0i2U-a9.js";import"./FolderOpenOutlined-Bj6jPccg.js";import"./HolderOutlined-CzOeoeCY.js";import"./index-B2mTmS5H.js";import"./FunctionOutlined-Dm0pzJNb.js";import"./util-DNkFm-j2.js";import"./index-C0E5Fhz-.js";import"./_baseGet-xRkAGEE7.js";import"./index-sNbwzaq7.js";var Yt="function",Ot="object",Xt="string",Mt="undefined",Rt=typeof document!==Mt&&document,It=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ce={cm:function(a){return a*96/2.54},mm:function(a){return a*96/254},in:function(a){return a*96},pt:function(a){return a*96/72},pc:function(a){return a*96/6},"%":function(a,n){return a*n/100},vw:function(a,n){return n===void 0&&(n=window.innerWidth),a/100*n},vh:function(a,n){return n===void 0&&(n=window.innerHeight),a/100*n},vmax:function(a,n){return n===void 0&&(n=Math.max(window.innerWidth,window.innerHeight)),a/100*n},vmin:function(a,n){return n===void 0&&(n=Math.min(window.innerWidth,window.innerHeight)),a/100*n}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ft(){for(var a=0,n=0,r=arguments.length;n<r;n++)a+=arguments[n].length;for(var t=Array(a),e=0,n=0;n<r;n++)for(var s=arguments[n],i=0,l=s.length;i<l;i++,e++)t[e]=s[i];return t}function Q(a){return a&&typeof a===Ot}function te(a){return Array.isArray(a)}function ot(a){return typeof a===Xt}function Pt(a){return typeof a===Yt}function Lt(a,n){var r=a===""||a==" ",t=n===""||n==" ";return t&&r||a===n}function st(a,n,r,t,e){var s=Ne(a,n,r);return s?r:Bt(a,n,r+1,t,e)}function Ne(a,n,r){if(!a.ignore)return null;var t=n.slice(Math.max(r-3,0),r+3).join("");return new RegExp(a.ignore).exec(t)}function Bt(a,n,r,t,e){for(var s=function(u){var h=n[u].trim();if(h===a.close&&!Ne(a,n,u))return{value:u};var f=u,c=ye(e,function(g){var x=g.open;return x===h});if(c&&(f=st(c,n,u,t,e)),f===-1)return i=u,"break";u=f,i=u},i,l=r;l<t;++l){var d=s(l);if(l=i,typeof d=="object")return d.value;if(d==="break")break}return-1}function at(a,n){var r=ot(n)?{separator:n}:n,t=r.separator,e=t===void 0?",":t,s=r.isSeparateFirst,i=r.isSeparateOnlyOpenClose,l=r.isSeparateOpenClose,d=l===void 0?i:l,u=r.openCloseCharacters,h=u===void 0?It:u,f=h.map(function(E){var C=E.open,D=E.close;return C===D?C:C+"|"+D}).join("|"),c="(\\s*"+e+"\\s*|"+f+"|\\s+)",g=new RegExp(c,"g"),x=a.split(g).filter(function(E){return E&&E!=="undefined"}),p=x.length,m=[],w=[];function v(){return w.length?(m.push(w.join("")),w=[],!0):!1}for(var _=function(E){var C=x[E].trim(),D=E,P=ye(h,function(R){var V=R.open;return V===C}),X=ye(h,function(R){var V=R.close;return V===C});if(P){if(D=st(P,x,E,p,h),D!==-1&&d)return v()&&s||(m.push(x.slice(E,D+1).join("")),E=D,s)?(b=E,"break"):(b=E,"continue")}else if(X&&!Ne(X,x,E)){var M=Ft(h);return M.splice(h.indexOf(X),1),{value:at(a,{separator:e,isSeparateFirst:s,isSeparateOnlyOpenClose:i,isSeparateOpenClose:d,openCloseCharacters:M})}}else if(Lt(C,e)&&!i)return v(),s?(b=E,"break"):(b=E,"continue");D===-1&&(D=p-1),w.push(x.slice(E,D+1).join("")),E=D,b=E},b,S=0;S<p;++S){var z=_(S);if(S=b,typeof z=="object")return z.value;if(z==="break")break}return w.length&&m.push(w.join("")),m}function Vt(a){return at(a,",")}function Wt(a){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(a);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],t=n[2],e=n[3];return{prefix:r,unit:e,value:parseFloat(t)}}function lt(a){return a.replace(/[\s-_]+([^\s-_])/g,function(n,r){return r.toUpperCase()})}function Ie(){return Date.now?Date.now():new Date().getTime()}function ct(a,n,r){r===void 0&&(r=-1);for(var t=a.length,e=0;e<t;++e)if(n(a[e],e,a))return e;return r}function ye(a,n,r){var t=ct(a,n);return t>-1?a[t]:r}function q(a,n){var r=Wt(a),t=r.value,e=r.unit;if(Q(n)){var s=n[e];if(s){if(Pt(s))return s(t);if(ce[e])return ce[e](t,s)}}else if(e==="%")return t*n/100;return ce[e]?ce[e](t):t}function Z(a,n,r){return Math.max(n,Math.min(a,r))}function Ht(a,n){var r=1/n;return Math.round(a/n)/r}function K(a,n){a.classList?a.classList.add(n):a.className+=" "+n}function Y(a,n,r,t){a.addEventListener(n,r,t)}function A(a,n,r,t){a.removeEventListener(n,r,t)}function ke(a){return(a==null?void 0:a.ownerDocument)||Rt}function J(a){var n;return((n=a==null?void 0:a.ownerDocument)===null||n===void 0?void 0:n.defaultView)||window}function qt(a){return a&&"postMessage"in a&&"blur"in a&&"self"in a}function Fe(a){return Q(a)&&a.nodeName&&a.nodeType&&"ownerDocument"in a}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var je=function(){return je=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},je.apply(this,arguments)};function Zt(){for(var a=0,n=0,r=arguments.length;n<r;n++)a+=arguments[n].length;for(var t=Array(a),e=0,n=0;n<r;n++)for(var s=arguments[n],i=0,l=s.length;i<l;i++,e++)t[e]=s[i];return t}var Ae=function(){function a(){this._events={}}var n=a.prototype;return n.on=function(r,t){if(Q(r))for(var e in r)this.on(e,r[e]);else this._addEvent(r,t,{});return this},n.off=function(r,t){if(!r)this._events={};else if(Q(r))for(var e in r)this.off(e);else if(!t)this._events[r]=[];else{var s=this._events[r];if(s){var i=ct(s,function(l){return l.listener===t});i>-1&&s.splice(i,1)}}return this},n.once=function(r,t){var e=this;return t&&this._addEvent(r,t,{once:!0}),new Promise(function(s){e._addEvent(r,s,{once:!0})})},n.emit=function(r,t){var e=this;t===void 0&&(t={});var s=this._events[r];if(!r||!s)return!0;var i=!1;return t.eventType=r,t.stop=function(){i=!0},t.currentTarget=this,Zt(s).forEach(function(l){l.listener(t),l.once&&e.off(r,l.listener)}),!i},n.trigger=function(r,t){return t===void 0&&(t={}),this.emit(r,t)},n._addEvent=function(r,t,e){var s=this._events;s[r]=s[r]||[];var i=s[r];i.push(je({listener:t},e))},a}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var we=function(a,n){return we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])},we(a,n)};function $t(a,n){we(a,n);function r(){this.constructor=a}a.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var O=function(){return O=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},O.apply(this,arguments)};function Gt(a,n){var r=n[0]-a[0],t=n[1]-a[1],e=Math.atan2(t,r);return e>=0?e:e+Math.PI*2}function ge(a){return Gt([a[0].clientX,a[0].clientY],[a[1].clientX,a[1].clientY])/Math.PI*180}function Ut(a){return a.touches&&a.touches.length>=2}function ue(a){return a?a.touches?Jt(a.touches):[ut(a)]:[]}function Kt(a){return a&&(a.type.indexOf("mouse")>-1||"button"in a)}function Pe(a,n,r){var t=r.length,e=oe(a,t),s=e.clientX,i=e.clientY,l=e.originalClientX,d=e.originalClientY,u=oe(n,t),h=u.clientX,f=u.clientY,c=oe(r,t),g=c.clientX,x=c.clientY,p=s-h,m=i-f,w=s-g,v=i-x;return{clientX:l,clientY:d,deltaX:p,deltaY:m,distX:w,distY:v}}function xe(a){return Math.sqrt(Math.pow(a[0].clientX-a[1].clientX,2)+Math.pow(a[0].clientY-a[1].clientY,2))}function Jt(a){for(var n=Math.min(a.length,2),r=[],t=0;t<n;++t)r.push(ut(a[t]));return r}function ut(a){return{clientX:a.clientX,clientY:a.clientY}}function oe(a,n){n===void 0&&(n=a.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},t=Math.min(a.length,n),e=0;e<t;++e){var s=a[e];r.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,r.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,r.clientX+=s.clientX,r.clientY+=s.clientY}return n?{clientX:r.clientX/n,clientY:r.clientY/n,originalClientX:r.originalClientX/n,originalClientY:r.originalClientY/n}:r}var _e=function(){function a(n){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=n,this.prevClients=n,this.length=n.length}return a.prototype.getAngle=function(n){return n===void 0&&(n=this.prevClients),ge(n)},a.prototype.getRotation=function(n){return n===void 0&&(n=this.prevClients),ge(n)-ge(this.startClients)},a.prototype.getPosition=function(n,r){n===void 0&&(n=this.prevClients);var t=Pe(n||this.prevClients,this.prevClients,this.startClients),e=t.deltaX,s=t.deltaY;return this.movement+=Math.sqrt(e*e+s*s),this.prevClients=n,t},a.prototype.getPositions=function(n){n===void 0&&(n=this.prevClients);for(var r=this.prevClients,t=this.startClients,e=Math.min(this.length,r.length),s=[],i=0;i<e;++i)s[i]=Pe([n[i]],[r[i]],[t[i]]);return s},a.prototype.getMovement=function(n){var r=this.movement;if(!n)return r;var t=oe(n,this.length),e=oe(this.prevClients,this.length),s=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(s*s+i*i)+r},a.prototype.getDistance=function(n){return n===void 0&&(n=this.prevClients),xe(n)},a.prototype.getScale=function(n){return n===void 0&&(n=this.prevClients),xe(n)/xe(this.startClients)},a.prototype.move=function(n,r){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=r}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=r})},a}(),Le=["textarea","input"],ht=function(a){$t(n,a);function n(r,t){t===void 0&&(t={});var e=a.call(this)||this;e.options={},e.flag=!1,e.pinchFlag=!1,e.data={},e.isDrag=!1,e.isPinch=!1,e.clientStores=[],e.targets=[],e.prevTime=0,e.doubleFlag=!1,e._useMouse=!1,e._useTouch=!1,e._useDrag=!1,e._dragFlag=!1,e._isTrusted=!1,e._isMouseEvent=!1,e._isSecondaryButton=!1,e._preventMouseEvent=!1,e._prevInputEvent=null,e._isDragAPI=!1,e._isIdle=!0,e._preventMouseEventId=0,e._window=window,e.onDragStart=function(c,g){if(g===void 0&&(g=!0),!(!e.flag&&c.cancelable===!1)){var x=c.type.indexOf("drag")>=-1;if(!(e.flag&&x)){e._isDragAPI=!0;var p=e.options,m=p.container,w=p.pinchOutside,v=p.preventWheelClick,_=p.preventRightClick,b=p.preventDefault,S=p.checkInput,z=p.dragFocusedInput,E=p.preventClickEventOnDragStart,C=p.preventClickEventOnDrag,D=p.preventClickEventByCondition,P=e._useTouch,X=!e.flag;if(e._isSecondaryButton=c.which===3||c.button===2,v&&(c.which===2||c.button===1)||_&&(c.which===3||c.button===2))return e.stop(),!1;if(X){var M=e._window.document.activeElement,R=c.target;if(R){var V=R.tagName.toLowerCase(),ve=Le.indexOf(V)>-1,ae=R.isContentEditable;if(ve||ae){if(S||!z&&M===R)return!1;if(M&&(M===R||ae&&M.isContentEditable&&M.contains(R)))if(z)R.blur();else return!1}else if((b||c.type==="touchstart")&&M){var pe=M.tagName.toLowerCase();(M.isContentEditable||Le.indexOf(pe)>-1)&&M.blur()}(E||C||D)&&Y(e._window,"click",e._onClick,!0)}e.clientStores=[new _e(ue(c))],e._isIdle=!1,e.flag=!0,e.isDrag=!1,e._isTrusted=g,e._dragFlag=!0,e._prevInputEvent=c,e.data={},e.doubleFlag=Ie()-e.prevTime<200,e._isMouseEvent=Kt(c),!e._isMouseEvent&&e._preventMouseEvent&&e._allowMouseEvent();var me=e._preventMouseEvent||e.emit("dragStart",O(O({data:e.data,datas:e.data,inputEvent:c,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,isTrusted:g,isDouble:e.doubleFlag},e.getCurrentStore().getPosition()),{preventDefault:function(){c.preventDefault()},preventDrag:function(){e._dragFlag=!1}}));me===!1&&e.stop(),e._isMouseEvent&&e.flag&&b&&c.preventDefault()}if(!e.flag)return!1;var Re=0;if(X?(e._attchDragEvent(),P&&w&&(Re=setTimeout(function(){Y(m,"touchstart",e.onDragStart,{passive:!1})}))):P&&w&&A(m,"touchstart",e.onDragStart),e.flag&&Ut(c)){if(clearTimeout(Re),X&&c.touches.length!==c.changedTouches.length)return;e.pinchFlag||e.onPinchStart(c)}}}},e.onDrag=function(c,g){if(e.flag){var x=e.options.preventDefault;!e._isMouseEvent&&x&&c.preventDefault(),e._prevInputEvent=c;var p=ue(c),m=e.moveClients(p,c,!1);if(e._dragFlag){if(e.pinchFlag||m.deltaX||m.deltaY){var w=e._preventMouseEvent||e.emit("drag",O(O({},m),{isScroll:!!g,inputEvent:c}));if(w===!1){e.stop();return}}e.pinchFlag&&e.onPinch(c,p)}e.getCurrentStore().getPosition(p,!0)}},e.onDragEnd=function(c){if(e.flag){var g=e.options,x=g.pinchOutside,p=g.container,m=g.preventClickEventOnDrag,w=g.preventClickEventOnDragStart,v=g.preventClickEventByCondition,_=e.isDrag;(m||w||v)&&requestAnimationFrame(function(){e._allowClickEvent()}),!v&&!w&&m&&!_&&e._allowClickEvent(),e._useTouch&&x&&A(p,"touchstart",e.onDragStart),e.pinchFlag&&e.onPinchEnd(c);var b=c!=null&&c.touches?ue(c):[],S=b.length;S===0||!e.options.keepDragging?e.flag=!1:e._addStore(new _e(b));var z=e._getPosition(),E=Ie(),C=!_&&e.doubleFlag;e._prevInputEvent=null,e.prevTime=_||C?0:E,e.flag||(e._dettachDragEvent(),e._preventMouseEvent||e.emit("dragEnd",O({data:e.data,datas:e.data,isDouble:C,isDrag:_,isClick:!_,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,inputEvent:c,isTrusted:e._isTrusted},z)),e.clientStores=[],e._isMouseEvent||(e._preventMouseEvent=!0,clearTimeout(e._preventMouseEventId),e._preventMouseEventId=setTimeout(function(){e._preventMouseEvent=!1},200)),e._isIdle=!0)}},e.onBlur=function(){e.onDragEnd()},e._allowClickEvent=function(){A(e._window,"click",e._onClick,!0)},e._onClick=function(c){e._allowClickEvent(),e._allowMouseEvent();var g=e.options.preventClickEventByCondition;g!=null&&g(c)||(c.stopPropagation(),c.preventDefault())},e._onContextMenu=function(c){var g=e.options;g.preventRightClick?e.onDragEnd(c):c.preventDefault()},e._passCallback=function(){};var s=[].concat(r),i=s[0];e._window=qt(i)?i:J(i),e.options=O({checkInput:!1,container:i&&!("document"in i)?J(i):i,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},t);var l=e.options,d=l.container,u=l.events,h=l.checkWindowBlur;if(e._useDrag=u.indexOf("drag")>-1,e._useTouch=u.indexOf("touch")>-1,e._useMouse=u.indexOf("mouse")>-1,e.targets=s,e._useDrag&&s.forEach(function(c){Y(c,"dragstart",e.onDragStart)}),e._useMouse&&(s.forEach(function(c){Y(c,"mousedown",e.onDragStart),Y(c,"mousemove",e._passCallback)}),Y(d,"contextmenu",e._onContextMenu)),h&&Y(J(),"blur",e.onBlur),e._useTouch){var f={passive:!1};s.forEach(function(c){Y(c,"touchstart",e.onDragStart,f),Y(c,"touchmove",e._passCallback,f)})}return e}return n.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},n.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},n.prototype.isDragging=function(){return this.isDrag},n.prototype.isIdle=function(){return this._isIdle},n.prototype.isFlag=function(){return this.flag},n.prototype.isPinchFlag=function(){return this.pinchFlag},n.prototype.isDoubleFlag=function(){return this.doubleFlag},n.prototype.isPinching=function(){return this.isPinch},n.prototype.scrollBy=function(r,t,e,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(r,t),s&&this.onDrag(e,!0))},n.prototype.move=function(r,t){var e=r[0],s=r[1],i=this.getCurrentStore(),l=i.prevClients;return this.moveClients(l.map(function(d){var u=d.clientX,h=d.clientY;return{clientX:u+e,clientY:h+s,originalClientX:u,originalClientY:h}}),t,!0)},n.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},n.prototype.setEventData=function(r){var t=this.data;for(var e in r)t[e]=r[e];return this},n.prototype.setEventDatas=function(r){return this.setEventData(r)},n.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),O(O({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},n.prototype.getEventData=function(){return this.data},n.prototype.getEventDatas=function(){return this.data},n.prototype.unset=function(){var r=this,t=this.targets,e=this.options.container;this.off(),A(this._window,"blur",this.onBlur),this._useDrag&&t.forEach(function(s){A(s,"dragstart",r.onDragStart)}),this._useMouse&&(t.forEach(function(s){A(s,"mousedown",r.onDragStart)}),A(e,"contextmenu",this._onContextMenu)),this._useTouch&&(t.forEach(function(s){A(s,"touchstart",r.onDragStart)}),A(e,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},n.prototype.onPinchStart=function(r){var t=this,e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var s=new _e(ue(r));this.pinchFlag=!0,this._addStore(s);var i=this.emit("pinchStart",O(O({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){t._dragFlag=!1}}));i===!1&&(this.pinchFlag=!1)}},n.prototype.onPinch=function(r,t){if(!(!this.flag||!this.pinchFlag||t.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",O(O({data:this.data,datas:this.data,movement:this.getMovement(t),angle:e.getAngle(t),rotation:e.getRotation(t),touches:e.getPositions(t),scale:e.getScale(t),distance:e.getDistance(t)},e.getPosition(t)),{inputEvent:r,isTrusted:this._isTrusted}))}},n.prototype.onPinchEnd=function(r){if(this.pinchFlag){var t=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.emit("pinchEnd",O(O({data:this.data,datas:this.data,isPinch:t,touches:e.getPositions()},e.getPosition()),{inputEvent:r}))}},n.prototype.getCurrentStore=function(){return this.clientStores[0]},n.prototype.moveClients=function(r,t,e){var s=this._getPosition(r,e),i=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var l=!1;return!i&&this.isDrag&&(l=!0),O(O({data:this.data,datas:this.data},s),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:t,isTrusted:this._isTrusted,isFirstDrag:l})},n.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},n.prototype._getPosition=function(r,t){var e=this.getCurrentStore(),s=e.getPosition(r,t),i=this.clientStores.slice(1).reduce(function(u,h){var f=h.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},s),l=i.distX,d=i.distY;return O(O({},s),{distX:l,distY:d})},n.prototype._attchDragEvent=function(){var r=this._window,t=this.options.container,e={passive:!1};this._isDragAPI&&(Y(t,"dragover",this.onDrag,e),Y(r,"dragend",this.onDragEnd)),this._useMouse&&(Y(t,"mousemove",this.onDrag),Y(r,"mouseup",this.onDragEnd)),this._useTouch&&(Y(t,"touchmove",this.onDrag,e),Y(r,"touchend",this.onDragEnd,e),Y(r,"touchcancel",this.onDragEnd,e))},n.prototype._dettachDragEvent=function(){var r=this._window,t=this.options.container;this._isDragAPI&&(A(t,"dragover",this.onDrag),A(r,"dragend",this.onDragEnd)),this._useMouse&&(A(t,"mousemove",this.onDrag),A(r,"mouseup",this.onDragEnd)),this._useTouch&&(A(t,"touchstart",this.onDragStart),A(t,"touchmove",this.onDrag),A(r,"touchend",this.onDragEnd),A(r,"touchcancel",this.onDragEnd))},n.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},n}(Ae);function Qt(a,n){return n.replace(/([^}{]*){/gm,function(r,t){return t.replace(/\.([^{,\s\d.]+)/g,"."+a+"$1")+"{"})}function ne(a,n){return function(r){r&&(a[n]=r)}}function en(a,n){return function(r){var t=r.prototype;a.forEach(function(e){n(t,e)})}}function tn(a,n){return n===void 0&&(n={}),function(r,t){a.forEach(function(e){var s=n[e]||e;s in r||(r[s]=function(){for(var i,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var u=(i=this[t])[e].apply(i,l);return u===this[t]?this:u})})}}function nn(a){for(var n=5381,r=a.length;r;)n=n*33^a.charCodeAt(--r);return n>>>0}var rn=nn;function on(a){return rn(a).toString(36)}function sn(a){if(a&&a.getRootNode){var n=a.getRootNode();if(n.nodeType===11)return n}}function an(a,n,r){return r.original?n:n.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(t,e){var s=e.trim();return(s?Vt(s):[""]).map(function(i){var l=i.trim();return l.indexOf("@")===0?l:l.indexOf(":global")>-1?l.replace(/\:global/g,""):l.indexOf(":host")>-1?"".concat(l.replace(/\:host/g,".".concat(a))):l?".".concat(a," ").concat(l):".".concat(a)}).join(", ")+" {"})}function ln(a,n,r,t,e){var s=ke(t),i=s.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",a),i.setAttribute("data-styled-count","1"),r.nonce&&i.setAttribute("nonce",r.nonce),i.innerHTML=an(a,n,r),(e||s.head||s.body).appendChild(i),i}function cn(a){var n="rCS"+on(a);return{className:n,inject:function(r,t){t===void 0&&(t={});var e=sn(r),s=(e||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(n,'"]'));if(!s)s=ln(n,a,t,r,e);else{var i=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(i+1))}return{destroy:function(){var l,d=parseFloat(s.getAttribute("data-styled-count"))||0;d<=1?(s.remove?s.remove():(l=s.parentNode)===null||l===void 0||l.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(d-1))}}}}}function Ye(a,n){for(var r=a.length,t=0;t<r;++t)if(n(a[t],t))return!0;return!1}function dt(a,n){for(var r=a.length,t=0;t<r;++t)if(n(a[t],t))return a[t];return null}function ft(a){var n=a;if(typeof n>"u"){if(typeof navigator>"u"||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}function Oe(a,n){try{return new RegExp(a,"g").exec(n)}catch{return null}}function un(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var a=navigator.userAgentData,n=a.brands||a.uaList;return!!(n&&n.length)}function hn(a,n){var r=Oe("("+a+")((?:\\/|\\s|:)([0-9|\\.|_]+))",n);return r?r[3]:""}function be(a){return a.replace(/_/g,".")}function ie(a,n){var r=null,t="-1";return Ye(a,function(e){var s=Oe("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return!s||e.brand?!1:(r=e,t=s[3]||"-1",e.versionAlias?t=e.versionAlias:e.versionTest&&(t=hn(e.versionTest.toLowerCase(),n)||t),t=be(t),!0)}),{preset:r,version:t}}function he(a,n){var r={brand:"",version:"-1"};return Ye(a,function(t){var e=vt(n,t);return e?(r.brand=t.id,r.version=t.versionAlias||e.version,r.version!=="-1"):!1}),r}function vt(a,n){return dt(a,function(r){var t=r.brand;return Oe(""+n.test,t.toLowerCase())})}var pt=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],mt=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Se=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],gt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],xt=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function _t(a){return!!ie(gt,a).preset}function dn(a){var n=ft(a),r=!!/mobi/g.exec(n),t={name:"unknown",version:"-1",majorVersion:-1,webview:_t(n),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},e={name:"unknown",version:"-1",majorVersion:-1},s=ie(pt,n),i=s.preset,l=s.version,d=ie(xt,n),u=d.preset,h=d.version,f=ie(mt,n);if(t.chromium=!!f.preset,t.chromiumVersion=f.version,!t.chromium){var c=ie(Se,n);t.webkit=!!c.preset,t.webkitVersion=c.version}return u&&(e.name=u.id,e.version=h,e.majorVersion=parseInt(h,10)),i&&(t.name=i.id,t.version=l,t.webview&&e.name==="ios"&&t.name!=="safari"&&(t.webview=!1)),t.majorVersion=parseInt(t.version,10),{browser:t,os:e,isMobile:r,isHints:!1}}function fn(a){var n=navigator.userAgentData,r=(n.uaList||n.brands).slice(),t=n.mobile||!1,e=r[0],s=(n.platform||navigator.platform).toLowerCase(),i={name:e.brand,version:e.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!he(gt,r).brand||_t(ft())},l={name:"unknown",version:"-1",majorVersion:-1};i.webkit=!i.chromium&&Ye(Se,function(c){return vt(r,c)});var d=he(mt,r);if(i.chromium=!!d.brand,i.chromiumVersion=d.version||"-1",!i.chromium){var u=he(Se,r);i.webkit=!!u.brand,i.webkitVersion=u.version||"-1"}var h=dt(xt,function(c){return new RegExp(""+c.test,"g").exec(s)});l.name=h?h.id:"";{var f=he(pt,r);i.name=f.brand||i.name,i.version=f.brand&&a?a.uaFullVersion:f.version}return i.webkit&&(l.name=t?"ios":"mac"),l.name==="ios"&&i.webview&&(i.version="-1"),l.version=be(l.version),i.version=be(i.version),l.majorVersion=parseInt(l.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:l,isMobile:t,isHints:!0}}function vn(a){return un()?fn():dn(a)}var Ee=function(a,n){return Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])},Ee(a,n)};function Xe(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Ee(a,n);function r(){this.constructor=a}a.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var B=function(){return B=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},B.apply(this,arguments)};function pn(a,n,r,t){var e=arguments.length,s=e<3?n:t===null?t=Object.getOwnPropertyDescriptor(n,r):t,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(a,n,r,t);else for(var l=a.length-1;l>=0;l--)(i=a[l])&&(s=(e<3?i(s):e>3?i(n,r,s):i(n,r))||s);return e>3&&s&&Object.defineProperty(n,r,s),s}function Be(a,n,r){if(r||arguments.length===2)for(var t=0,e=n.length,s;t<e;t++)(s||!(t in n))&&(s||(s=Array.prototype.slice.call(n,0,t)),s[t]=n[t]);return a.concat(s||Array.prototype.slice.call(n))}var mn=vn(),gn=mn.browser.name==="safari",$="infinite-viewer-",Ve="".concat($,"wrapper"),We="".concat($,"scroll-area"),xn="".concat($,"scroll-bar"),yt="".concat($,"horizontal-scroll-bar"),jt="".concat($,"vertical-scroll-bar"),He="".concat($,"scroll-thumb"),wt=cn(Qt($,`
{
    position: relative;
    overscroll-behavior: none;
}
.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: auto;
    scrollbar-width: none;
    top: 0;
    left: 0;
    will-change: scroll-position;
}
.restrict-wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}
.wrapper::-webkit-scrollbar {
    display: none;
}
.scroll-area {
    position:absolute;
    top:0;
    left:0;
    transform-origin: 0 0;
}
.scroll-bar {
    position:absolute;
    width: 10px;
    height: 10px;
    box-sizing: border-box;
    right: 0;
    bottom: 0;
    overflow: hidden;
}
.horizontal-scroll-bar {
    width: calc(100% - 20px);
    right: 10px;
    height: 14px;
}
.vertical-scroll-bar {
    height: calc(100% - 20px);
    bottom: 10px;
    width: 14px;
}
.scroll-thumb {
    position:relative;
    opacity: 0.7;
    background: #333;
    border-radius: 3px;
    left: 0px;
    top: 0px;
    z-index: 10;
    width: 6px;
    height: 6px;
    transition: all ease 0.2s;
    opacity: 0;
}
.scroll-bar:hover .scroll-thumb {
    border-radius: 5px;
    opacity: 1;
}
.horizontal-scroll-bar .scroll-thumb {
    margin: 4px 0px;
    transition-property: opacity, margin, height, border-radius;
}
.vertical-scroll-bar .scroll-thumb {
    margin: 0px 4px;
    transition-property: opacity, margin, width, border-radius;
}
.horizontal-scroll-bar:hover .scroll-thumb {
    height: 10px;
    margin: 2px 0px;
}
.vertical-scroll-bar:hover .scroll-thumb {
    width: 10px;
    margin: 0px 2px;
}
`)),F={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:gn,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0,useBounceScrollBar:!1,useOverflowScroll:!1},qe=function(a){return 1-Math.pow(1-a,3)},Ze={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},bt=wt.className,Me=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","zoomRangeX","zoomRangeY","pinchDirection","useOverflowScroll"],_n=Be(Be([],Me,!0),["preventWheelClick","useWheelPinch","useWheelScroll","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer","useBounceScrollBar"],!1),St=["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],yn=["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","getContainerWidth","getContainerHeight","getViewportWidth","getViewportHeight","getViewportScrollWidth","getViewportScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY","getWheelContainer","setTo","setBy"],jn=1e-6;function wn(a){var n=a.deltaX,r=a.deltaY,t=a.datas,e=Date.now(),s=t.speed;if(!s){t.speed=[0,0],t.time=e;return}var i=e-t.time;t.speed=[s[0]/2+n/i,s[1]/2+r/i]}function Et(a,n){var r=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return Math.abs(r/n)}function bn(a,n){var r=Et(a,n);return[-a[0]/2*r,-a[1]/2*r]}function W(a){return Math.abs(a)}function Sn(a,n,r,t,e){var s=e||isFinite(r[0])?r[0]:Math.min(-1,Math.floor(a/n))*n-t,i=e||isFinite(r[1])?r[1]:Math.max(1,Math.ceil(a/n))*n+t;return[s,i]}function $e(a,n){return a??n}function Ge(a,n,r){var t=r.duration,e=r.easing||function(d){return 1-Math.pow(1-d,3)},s=Date.now(),i=s,l=function(){var d=Date.now(),u=d-s;t<u&&(u=t);var h=e(u/t),f=e((i-s)/t);i=d,a(h-f),!(u>=t)&&n(l)};n(l)}var Ue=function(a){Xe(n,a);function n(t,e,s){var i=a.call(this)||this;i.type=e,i.isAppend=!1,i.size=0,i.scrollSize=0,i.isHorizontal=!1,i._onDragStart=function(f){var c=i.isHorizontal,g=f.inputEvent.target,x=f.datas,p=i.thumbElement===g;p||setTimeout(function(){requestAnimationFrame(function(){var m=i.thumbElement.getBoundingClientRect(),w=m[c?"left":"top"],v=m[c?"width":"height"],_=w+v,b=f[c?"clientX":"clientY"];if(!(w<=b&&b<=_)){var S=i.size,z=S*S/i.scrollSize;i.scrollBy(w<b?z:-z)}})},100),x.isThumb=p,f.inputEvent.stopPropagation(),f.inputEvent.preventDefault()},i._onDrag=function(f){f.datas.isThumb&&i.scrollBy(i.isHorizontal?f.deltaX:f.deltaY)},i._onWheel=function(f){var c=i.isHorizontal?f.deltaX:f.deltaY;c&&f.preventDefault(),i.trigger("scroll",{delta:c})};var l=e==="horizontal",d=ke(t),u,h=s;return s?u=s.querySelector(".".concat(He)):(h=d.createElement("div"),u=d.createElement("div"),h.insertBefore(u,null),i.isAppend=!0),K(h,l?yt:jt),K(h,xn),K(u,He),i.thumbElement=u,i.barElement=h,i.isHorizontal=l,i.gesto=new ht(h,{container:J(d)}).on("dragStart",function(f){return i._onDragStart(f)}).on("drag",function(f){return i._onDrag(f)}),Y(i.barElement,"wheel",i._onWheel,{passive:!1}),i}var r=n.prototype;return r.scrollBy=function(t,e){var s=t/this.size;this.trigger("scroll",{delta:e?t:this.scrollSize*s})},r.render=function(t,e,s,i){this.size=s,this.scrollSize=i;var l=t&&Ht(i-s,.001)>0?1:0,d=this.isHorizontal?["X","width"]:["Y","height"],u=d[0],h=d[1],f=s/i*100,c=Math.max(0,e)/i*100;this.thumbElement.style.cssText+="".concat(h,": ").concat(f,"%;opacity: ").concat(l,";")+"transform: translate".concat(u,"(").concat(100/f*c,"%)")},r.destroy=function(){A(this.barElement,"wheel",this._onWheel),this.gesto.off(),this.off()},n}(Ae),En=function(a){Xe(n,a);function n(t,e,s){e===void 0&&(e={}),s===void 0&&(s={});var i=a.call(this)||this;return i._containerElement=t,i.offsetX=0,i.offsetY=0,i.containerWidth=0,i.containerHeight=0,i.viewportWidth=0,i.viewportHeight=0,i.viewportScrollWidth=0,i.viewportScrollHeight=0,i.scrollLeft=0,i.scrollTop=0,i._scrollTimer=0,i._zoomTimer=0,i._viewportElement=null,i._wheelContainerElement=null,i.dragFlag=!1,i.isLoop=!1,i._tempScale=[1,1],i._tempRect=null,i._tempRectTimer=null,i._onDestroys=[],i._asLeft=0,i._asTop=0,i.resize=function(){var l=i._containerElement,d=l.offsetWidth,u=l.offsetHeight,h=i._viewportElement,f=h.offsetWidth,c=h.offsetHeight,g=h.scrollWidth,x=h.scrollHeight;i.containerWidth=d,i.containerHeight=u,i.viewportWidth=f,i.viewportHeight=c,i.viewportScrollWidth=Math.max(f,g),i.viewportScrollHeight=Math.max(c,x),i.render(),i._scrollBy(0,0)},i._onScroll=function(){var l=i.wrapperElement,d=l.scrollLeft,u=l.scrollTop,h=i.zoom,f=h===void 0?F.zoom:h,c=d-i.scrollLeft,g=u-i.scrollTop,x=i.getScrollLeft(),p=i.getScrollTop();i.isLoop&&(i.isLoop=!1),i.scrollLeft=d,i.scrollTop=u,i.scrollTo(x+c/f,p+g/f)},i.onWheel=function(l){var d=i.options,u=d.pinchDirection,h=d.maxPinchWheel||1/0,f=l["".concat(i.wheelPinchKey,"Key")]||l.ctrlKey;if(d.useWheelPinch&&f){var c=l.deltaY,g=c>=0?1:-1,x=Math.min(h,Math.abs(c));c=g*x;var p=-c,m=Math.max(1+p*(d.wheelScale||.01),jn);clearTimeout(i._tempRectTimer),i._tempRectTimer=window.setTimeout(function(){i._tempRect=null},100),i._triggerPinch({distance:x,scale:m,rotation:0,zoom:i.zoom*m,zoomX:i.zoomX*(u==="vertical"?1:m),zoomY:i.zoomY*(u==="horizontal"?1:m),inputEvent:l,isWheel:!0,clientX:l.clientX,clientY:l.clientY,ratioX:0,ratioY:0})}else if(d.useWheelScroll){var w=l.deltaX,c=l.deltaY;l.shiftKey&&!w&&(w=c,c=0),i.scrollBy(w/i.zoomX,c/i.zoomY)}else return;l.preventDefault()},i.onGestureStart=function(l){i._tempScale=[i.zoomX,i.zoomY],i._setClientRect(),l.preventDefault()},i.onGestureChange=function(l){if(l.preventDefault(),i.gesto.isFlag()||!i._tempScale){i._tempScale=[1,1];return}var d=l.scale,u=i._tempScale[0],h=i._tempScale[1],f=i.options.pinchDirection;i._triggerPinch({distance:0,scale:d,rotation:l.rotation,inputEvent:l,isWheel:!0,zoom:(u+h)*d/2,zoomX:u*(f==="vertical"?1:d),zoomY:h*(f==="horizontal"?1:d),clientX:l.clientX,clientY:l.clientY,ratioX:0,ratioY:0})},i.onGestureEnd=function(){},Fe(e)?(i._viewportElement=e,i.options=B(B({},F),s)):(i._viewportElement=t.children[0],i.options=B(B({},F),e)),i.init(),i}var r=n.prototype;return r.getContainer=function(){return this._containerElement},r.getWheelContainer=function(){return this._wheelContainerElement},r.getViewport=function(){return this._viewportElement},r.getWrapper=function(){return this.wrapperElement},r.geScrollArea=function(){return this.scrollAreaElement},r.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var t=this._containerElement;this._onDestroys.forEach(function(e){e()}),A(this.wrapperElement,"scroll",this._onScroll),A(this._wheelContainerElement,"wheel",this.onWheel),A(t,"gesturestart",this.onGestureStart),A(t,"gesturechange",this.onGestureChange),A(t,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},r.getScrollTop=function(t){t===void 0&&(t={});var e=!1,s=!1;Q(t)?(e=t.range,s=t.absolute):e=t;var i=this.zoomY,l=this.scrollTop/i+this.offsetY+(e?W(this.getRangeY()[0]):0);return s?l*i:l},r.getScrollLeft=function(t){t===void 0&&(t={});var e=!1,s=!1;Q(t)?(e=t.range,s=t.absolute):e=t;var i=this.zoomX,l=this.scrollLeft/i+this.offsetX+(e?W(this.getRangeX()[0]):0);return s?l*i:l},r.getScrollWidth=function(t){var e=this._getScrollRangeX(),s=this.zoomX,i=this.containerWidth/s+W(e[0])+e[1];return t?i:i*s},r.getScrollHeight=function(t){var e=this._getScrollRangeY(),s=this.zoomY,i=this.containerHeight/s+W(e[0])+e[1];return t?i:i*s},r.scrollCenter=function(t){t===void 0&&(t={}),this.resize();var e=this.zoomX,s=this.zoomY,i=-(this.containerWidth/e-this.viewportWidth)/2,l=-(this.containerHeight/s-this.viewportHeight)/2;return t.absolute&&(i*=e,l*=s),t.horizontal===!1&&(i=this.getScrollLeft()),t.vertical===!1&&(l=this.getScrollTop()),this.scrollTo(i,l,t)},r.setTo=function(t){var e=t.x,s=e===void 0?this.getScrollLeft():e,i=t.y,l=i===void 0?this.getScrollTop():i,d=t.zoom,u=d===void 0?[this.getZoomX(),this.getZoomY()]:d,h=t.duration,f=this,c=f.zoomX,g=f.zoomY,x=f.zoomRange,p=this,m=p.zoomOffsetX,w=m===void 0?F.zoomOffsetX:m,v=p.zoomOffsetY,_=v===void 0?F.zoomOffsetY:v;"zoomOffsetX"in t&&(w=t.zoomOffsetX),"zoomOffsetY"in t&&(_=t.zoomOffsetY);var b=te(u)?u:[u,u],S=b[0],z=b[1],E=this.zoomRangeX||x,C=this.zoomRangeY||x,D=Z(S,E[0],E[1]),P=Z(z,C[0],C[1]),X=q("".concat(w),this.viewportWidth)*(1/c-1/D),M=q("".concat(_),this.viewportHeight)*(1/g-1/P);this.scrollTo(s-X,l-M,{duration:h}),this.setZoom(u,{zoomOffsetX:w,zoomOffsetY:_,duration:h,zoomBase:"fixed"})},r.setBy=function(t){var e=t.x,s=e===void 0?0:e,i=t.y,l=i===void 0?0:i,d=t.zoom,u=d===void 0?[0,0]:d,h=te(u)?u:[u,u],f=h[0],c=h[1];this.setTo(B(B({},t),{x:this.getScrollLeft()+s,y:this.getScrollTop()+l,zoom:[this.zoomX+f,this.zoomY+c]}))},r.scrollBy=function(t,e,s){if(this._pauseScrollAnimation(),!s||!s.duration){var i=this.getScrollLeft(),l=this.getScrollTop();return s!=null&&s.absolute&&(i*=this.zoomX,l*=this.zoomY),this._scrollTo(i+t,l+e,s)}else return this._startScrollAnimation([t,e],s),!0},r.scrollTo=function(t,e,s){if(this._pauseScrollAnimation(),!s||!s.duration)return this._scrollTo(t,e,s);var i=this.getScrollLeft(),l=this.getScrollTop();return s!=null&&s.absolute&&(i*=this.zoomX,l*=this.zoomY),this.scrollBy(t-i,e-l,s)},r.zoomBy=function(t,e){this._pauseZoomAnimation();var s=te(t)?t:[t,t],i=s[0],l=s[1];!e||!e.duration?this._setZoom([this.zoomX+i,this.zoomY+l],e):this._startZoomAnimation([i,l],e)},r.setZoom=function(t,e){if(this._pauseZoomAnimation(),!e||!e.duration)this._setZoom(t,e);else{var s=te(t)?t:[t,t],i=s[0],l=s[1];this._startZoomAnimation([i-this.zoomX,l-this.zoomY],e)}},r.getViewportWidth=function(){return this.viewportWidth},r.getViewportHeight=function(){return this.viewportWidth},r.getViewportScrollWidth=function(){return this.viewportScrollWidth},r.getViewportScrollHeight=function(){return this.viewportScrollHeight},r.getContainerWidth=function(){return this.containerWidth},r.getContainerHeight=function(){return this.containerHeight},r.getZoom=function(){return(this.zoomX+this.zoomY)/2},r.getZoomX=function(){return this.zoomX},r.getZoomY=function(){return this.zoomY},r.getRangeX=function(t,e){return this._getRangeCoord("horizontal",t,e)},r.getRangeY=function(t,e){return this._getRangeCoord("vertical",t,e)},r.init=function(){var t=this,e,s=this._containerElement,i=this.options,l=ke(s),d=J(s),u=i.wrapperElement||s.querySelector(".".concat(Ve)),h=i.scrollAreaElement||s.querySelector(".".concat(We)),f=i.horizontalScrollElement||s.querySelector(".".concat(yt)),c=i.verticalScrollElement||s.querySelector(".".concat(jt));u||(u=l.createElement("div"),u.insertBefore(this._viewportElement,null),s.insertBefore(u,null)),this.wrapperElement=u,h||(h=l.createElement("div"),u.insertBefore(h,u.firstChild)),this.scrollAreaElement=h,K(s,bt),K(u,Ve),K(h,We);var g=new Ue(s,"horizontal",f),x=new Ue(s,"vertical",c);this.horizontalScrollbar=g,this.verticalScrollbar=x,g.on("scroll",function(v){t.scrollBy(v.delta/t.zoomX,0)}),x.on("scroll",function(v){t.scrollBy(0,v.delta/t.zoomY)}),g.isAppend&&s.insertBefore(g.barElement,null),x.isAppend&&s.insertBefore(x.barElement,null),this.injectResult=wt.inject(s,{nonce:this.options.cspNonce});var p=i.wheelContainer,m=null;if(p&&(ot(p)?m=l.querySelector(p):Fe(p)?m=p:("value"in p||"current"in p)&&(m=p.current||p.value)),m||(m=s),this._wheelContainerElement=m,this.gesto=new ht(s,{container:J(s),events:["touch","mouse"],preventWheelClick:(e=this.options.preventWheelClick)!==null&&e!==void 0?e:!0}).on("dragStart",function(v){var _=v.inputEvent,b=v.stop,S=v.datas;if(!t.useMouseDrag&&v.isMouseEvent){b();return}t._pauseScrollAnimation(),t.dragFlag=!1;var z=t.trigger("dragStart",v);if(z===!1){b();return}_.preventDefault(),S.startEvent=_}).on("drag",function(v){!t.options.usePinch||v.isPinch||t.useMouseDrag&&v.isMouseEvent?(t.trigger("drag",B(B({},v),{inputEvent:v.inputEvent})),wn(v),t.scrollBy(-v.deltaX/t.zoomX,-v.deltaY/t.zoomY)):!t.dragFlag&&v.movement>i.pinchThreshold&&(t.dragFlag=!0,t.trigger("abortPinch",{inputEvent:v.datas.startEvent||v.inputEvent}))}).on("dragEnd",function(v){t.trigger("dragEnd",{isDrag:v.isDrag,isDouble:v.isDouble,inputEvent:v.inputEvent}),t._startScrollAnimationBySpeed(v.datas.speed)}).on("pinchStart",function(v){var _=v.inputEvent,b=v.datas,S=v.stop;_.preventDefault(),t._pauseScrollAnimation(),b.startZoom=[t.zoomX,t.zoomY];var z=t.trigger("pinchStart",{inputEvent:_});z===!1&&S(),t._setClientRect()}).on("pinch",function(v){var _=v.scale,b=t.options.pinchDirection;t._triggerPinch({rotation:v.rotation,distance:v.distance,scale:v.scale,inputEvent:v.inputEvent,isWheel:!1,zoom:v.datas.startZoom*_,zoomX:t.zoomX*(b==="vertical"?1:_),zoomY:t.zoomY*(b==="horizontal"?1:_),clientX:v.clientX,clientY:v.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){t._tempRect=null}),Y(u,"scroll",this._onScroll),i.useResizeObserver){var w=new d.ResizeObserver(function(){t.resize()});w.observe(this._viewportElement),w.observe(this._containerElement),this._onDestroys.push(function(){w.disconnect()})}else Y(d,"resize",this.resize),this._onDestroys.push(function(){A(d,"resize",t.resize)});(i.useWheelPinch||i.useWheelScroll)&&Y(m,"wheel",this.onWheel,{passive:!1}),i.useGesture&&(Y(s,"gesturestart",this.onGestureStart,{passive:!1}),Y(s,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},r.render=function(){var t=this,e=t.offsetX,s=t.offsetY,i=t.zoomX,l=i===void 0?F.zoomX:i,d=t.zoomY,u=d===void 0?F.zoomY:d,h=t.translateZ,f=h===void 0?0:h;t.rangeX,t.rangeY,t.containerWidth,t.containerHeight;var c=this.options.useTransform,g=c===void 0?F.useTransform:c,x=-e*l,p=-s*u;this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);");var m=this._viewportElement.style;g===!1?m.cssText+="position: relative; left: ".concat(x,"px; top: ").concat(p,"px; "):m.cssText+="transform-origin: 0 0;"+"transform:translate3d(".concat(x,"px, ").concat(p,"px, ").concat(f,"px) scale(").concat(l,", ").concat(u,");"),this.renderScroll()},r.renderScroll=function(){var t=this,e=t.zoomX,s=t.zoomY,i=t.containerWidth,l=t.containerHeight,d=this.horizontalScrollbar,u=this.verticalScrollbar;if(this.options.useBounceScrollBar){var h=this.getScrollLeft(!0)*e,f=this.getRangeX(!0),c=i+W(f[0])+W(f[1]),g=this.getScrollTop(!0)*s,x=this.getRangeY(!0),p=l+W(x[0])+W(x[1]);d.render(this.displayHorizontalScroll,h,i,c),u.render(this.displayVerticalScroll,g,l,p)}else{var m=this._getScrollRangeX(),w=this._getScrollRangeY(),h=this.getScrollLeft(),g=this.getScrollTop(),c=this.containerWidth+W(m[0])+m[1],p=this.containerHeight+W(w[0])+w[1];d.render(this.displayHorizontalScroll,h-m[0],i,c),u.render(this.displayVerticalScroll,g-w[0],l,p)}},r.move=function(t,e){var s=this.wrapperElement;s.scrollLeft=t,s.scrollTop=e},r.setDisplayVerticalScroll=function(t){this.options.displayVerticalScroll=t,this.renderScroll()},r.setDisplayHorizontalScroll=function(t){this.options.displayHorizontalScroll=t,this.renderScroll()},r._startZoomAnimation=function(t,e){var s=this;if(t){var i=e.duration,l=e.easing||qe;Ge(function(d){return s._setZoom([s.zoomX+t[0]*d,s.zoomY+t[1]*d],e)},function(d){s._zoomTimer=requestAnimationFrame(d)},{easing:l,duration:i})}},r._startScrollAnimation=function(t,e){var s=this;if(!(!t[0]&&!t[1])){var i=e.duration,l=e.easing||qe;Ge(function(d){return s._scrollBy(t[0]*d,t[1]*d,e)},function(d){s._scrollTimer=requestAnimationFrame(d)},{easing:l,duration:i})}},r._startScrollAnimationBySpeed=function(t){if(!(!t||!t[0]&&!t[1])){var e=-6e-4,s=Et(t,e),i=bn(t,e);return this._startScrollAnimation(i,{duration:s})}},r._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},r._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},r.getScrollAreaWidth=function(){var t=this.getRangeX(!0),e=t[0],s=t[1];return e||s?this.margin*2:0},r.getScrollAreaHeight=function(){var t=this.getRangeY(!0),e=t[0],s=t[1];return e||s?this.margin*2:0},r._triggerPinch=function(t){var e=t.clientX,s=t.clientY,i=t.zoomX,l=t.zoomY;this.useAutoZoom&&this._zoomByClient([i,l],e,s),this._tempRect||this._setClientRect();var d=this.zoomRange,u=this.zoomRangeX||d,h=this.zoomRangeY||d,f=this._tempRect,c=f.left,g=f.top,x=f.width,p=f.height,m=(e-c)/x*100,w=(s-g)/p*100;this.trigger("pinch",B(B({},t),{zoom:Z((i+l)/2,d[0],d[1]),zoomX:Z(i,u[0],u[1]),zoomY:Z(l,h[0],h[1]),ratioX:m,ratioY:w}))},r._setClientRect=function(){var t=this.getContainer().getBoundingClientRect();this._tempRect={left:t.left,top:t.top,width:t.width,height:t.height}},r._zoomByClient=function(t,e,s){this._tempRect||this._setClientRect();var i=this._tempRect,l=i.left,d=i.top,u=i.width,h=i.height,f=this.options,c=f.zoomOffsetX,g=f.zoomOffsetY;f.zoomOffsetX="".concat((e-l)/u*100,"%"),f.zoomOffsetY="".concat((s-d)/h*100,"%"),this._setZoom(t,{zoomBase:"screen"}),f.zoomOffsetX=c,f.zoomOffsetY=g},r._setZoom=function(t,e){e===void 0&&(e={});var s=e.zoomBase,i=this,l=i.containerWidth,d=i.containerHeight,u=i.zoomX,h=i.zoomY,f=i.zoomRange,c=this,g=c.zoomOffsetX,x=g===void 0?F.zoomOffsetX:g,p=c.zoomOffsetY,m=p===void 0?F.zoomOffsetY:p;"zoomOffsetX"in e&&(x=e.zoomOffsetX),"zoomOffsetY"in e&&(m=e.zoomOffsetY);var w=this.getScrollLeft(),v=this.getScrollTop(),_=te(t)?t:[t,t],b=_[0],S=_[1],z=this.zoomRangeX||f,E=this.zoomRangeY||f,C=Z(b,z[0],z[1]),D=Z(S,E[0],E[1]),P=this.options;P.zoomX=C,P.zoomY=D,P.zoom=(C+D)/2;var X=this.getScrollLeft(),M=this.getScrollTop(),R=0,V=0;s==="fixed"?(R=q("".concat(x),this.viewportWidth),V=q("".concat(m),this.viewportHeight)):s==="viewport"?(R=(-w+q("".concat(x),this.viewportWidth))*u,V=(-v+q("".concat(m),this.viewportHeight))*h):(R=q("".concat(x),l),V=q("".concat(m),d));var ve=w+R/u,ae=v+V/h,pe=X+R/C,me=M+V/D;this._scrollBy(ve-pe,ae-me,{zoom:!!(C-u||D-h)}),this.render()},r._scrollBy=function(t,e,s){var i=this.getScrollLeft(),l=this.getScrollTop();return s!=null&&s.absolute&&(i*=this.zoomX,l*=this.zoomY),this._scrollTo(i+t,l+e,s)},r._scrollTo=function(t,e,s){var i=this,l=this,d=l.scrollLeft,u=l.scrollTop,h=s==null?void 0:s.absolute;this._scrollToType("horizontal",t,h),this._scrollToType("vertical",e,h);var f=this.scrollLeft,c=this.scrollTop;this.render();var g=this.getScrollLeft(),x=this.getScrollTop();return this._emitScrollEvent(g,x,s==null?void 0:s.zoom),Math.round(d)!==f||Math.round(u)!==c?(this.isLoop=!0,this.move(f,c),requestAnimationFrame(function(){if(i.isLoop){i.isLoop=!1;var p=i.wrapperElement,m=p.scrollLeft,w=p.scrollTop;i.scrollLeft=m,i.scrollTop=w,(f!==Math.round(m)||c!==Math.round(w))&&i._scrollTo(g,x)}}),!1):!0},r._scrollToType=function(t,e,s){var i=Ze[t],l=this,d=l.margin,u=d===void 0?F.margin:d,h=l.threshold,f=h===void 0?F.threshold:h,c=this["scroll".concat(i.pos)],g=this["getRange".concat(i.coord)](!0,!0),x=g[0],p=g[1],m=Math.round(c),w=this["getScrollArea".concat(i.size)](),v=this["zoom".concat(i.coord)];s&&(e=e/v);var _=e*v;if(x===p)m=x,e=x/v;else if(_-f<=x){var b=Math.max(0,_-x);m=b,e=(x+b)/v}else if(_+f>=p){var S=Math.max(0,p-_);m=w-S,e=(p-S)/v}else m<f?m+=u:m>w-f&&(m-=u);m=Math.round(m),this["scroll".concat(i.pos)]=m,this["offset".concat(i.coord)]=e-m/v},r._getRangeCoord=function(t,e,s){var i=this,l=i.margin,d=l===void 0?F.margin:l,u=i.threshold,h=Ze[t],f=$e(this["range".concat(h.coord)],F["range".concat(h.coord)]),c=$e(this["rangeOffset".concat(h.coord)],F["rangeOffset".concat(h.coord)]),g=this["zoom".concat(h.coord)],x=Sn(this["getScroll".concat(h.pos)](),d,f,u,s);return e?[x[0]*g+c[0],this.options.useOverflowScroll?Math.max(this["viewport".concat(h.size)]*g-this["container".concat(h.size)],x[1]*g+c[1]):x[1]*g+c[1]]:[x[0]+c[0],x[1]+c[1]]},r._emitScrollEvent=function(t,e,s){var i=this._asLeft,l=this._asTop;!s&&i===t&&l===e||(this._asLeft=t,this._asTop=e,this.trigger("scroll",{scrollLeft:t,scrollTop:e,zoomX:this.zoomX,zoomY:this.zoomY}))},r._getScrollRangeX=function(){var t=this.getScrollLeft(),e=this.rangeX,s=e[0],i=e[1];this.useOverflowScroll&&isFinite(i)&&(i=Math.max(i,this.viewportWidth-this.containerWidth/this.zoomX));var l=Math.min(0,isFinite(s)?Math.min(s,t):t),d=Math.max(0,isFinite(i)?Math.max(i,t):t),u=this.viewportScrollWidth,h=Math.max(this.containerWidth/this.zoomX,u)-u,f=Math.min(0,h+l);return[f,d]},r._getScrollRangeY=function(){var t=this.getScrollTop(),e=this.rangeY,s=e[0],i=e[1];this.useOverflowScroll&&isFinite(i)&&(i=Math.max(i,this.viewportHeight-this.containerHeight/this.zoomY));var l=Math.min(0,isFinite(s)?Math.min(s,t):t),d=Math.max(0,isFinite(i)?Math.max(i,t):t),u=this.viewportScrollHeight,h=Math.max(this.containerHeight/this.zoomY,u)-u,f=Math.min(0,h+l);return[f,d]},n=pn([en(Me,function(t,e){var s={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},i=lt("set ".concat(e));t[i]?s.set=function(l){this[i](l)}:s.set=function(l){this.options[e]=l},Object.defineProperty(t,e,s)})],n),n}(Ae),Cn=function(a){Xe(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(En),Ce=function(a,n){return Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])},Ce(a,n)};function Tn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Ce(a,n);function r(){this.constructor=a}a.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var fe=function(){return fe=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},fe.apply(this,arguments)};function zn(a,n,r,t){var e=arguments.length,s=e<3?n:t,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(a,n,r,t);else for(var l=a.length-1;l>=0;l--)(i=a[l])&&(s=(e<3?i(s):e>3?i(n,r,s):i(n,r))||s);return e>3&&s&&Object.defineProperty(n,r,s),s}var Ke=St.map(function(a){return lt("on ".concat(a))}),Dn=function(a){Tn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}var r=n.prototype;return r.render=function(){var t=this.props.className;return T.createElement("div",{className:"".concat(t||""," ").concat(bt),ref:ne(this,"containerElement")},T.createElement("div",{className:"infinite-viewer-wrapper",ref:ne(this,"wrapperElement")},T.createElement("div",{className:"infinite-viewer-scroll-area",ref:ne(this,"scrollAreaElement")}),this.props.children),T.createElement("div",{className:"infinite-viewer-scroll-bar infinite-viewer-horizontal-scroll-bar",ref:ne(this,"horizontalScrollElement")},T.createElement("div",{className:"infinite-viewer-scroll-thumb"})),T.createElement("div",{className:"infinite-viewer-scroll-bar infinite-viewer-vertical-scroll-bar",ref:ne(this,"verticalScrollElement")},T.createElement("div",{className:"infinite-viewer-scroll-thumb"})))},r.componentDidMount=function(){var t=this,e=this.props,s={};_n.forEach(function(i){i in e&&typeof e[i]<"u"&&(s[i]=e[i])}),this.infiniteViewer=new Cn(this.containerElement,this.scrollAreaElement.nextElementSibling,fe(fe({},s),{wrapperElement:this.wrapperElement,scrollAreaElement:this.scrollAreaElement,horizontalScrollElement:this.horizontalScrollElement,verticalScrollElement:this.verticalScrollElement})),St.forEach(function(i,l){t.infiniteViewer.on(i,function(d){var u=t.props,h=u[Ke[l]]&&u[Ke[l]](d);h===!1&&d.stop()})})},r.componentDidUpdate=function(t){var e=this.props,s=this.infiniteViewer;Me.forEach(function(i){i in e&&s[i]!==e[i]&&(s[i]=e[i])})},r.componentWillUnmount=function(){this.infiniteViewer.destroy()},r.getElement=function(){return this.containerElement},zn([tn(yn)],n.prototype,"infiniteViewer",void 0),n}(T.PureComponent);function Nn(a,n){const[r,t]=T.useState(!1),[e,s]=T.useState(),[i]=y.useForm();T.useImperativeHandle(n,()=>({open(u,h){t(!0),s({callback:h}),i.setFieldsValue({title:u})}}));const l=()=>{t(!1)},d=()=>{i.validateFields().then(u=>{e==null||e.callback(u.title),t(!1)}).catch(u=>{console.log(u)})};return o.jsx(o.Fragment,{children:o.jsx(nt,{title:"节点修改",open:r,onCancel:l,onOk:d,children:o.jsx(y,{form:i,style:{width:"80%",margin:"20px auto 0"},children:o.jsx(y.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入节点名称"}],children:o.jsx(L,{placeholder:"请输入节点名称"})})})})})}const kn=T.forwardRef(Nn),An="_actionBox_1576k_2",Yn="_menuAction_1576k_8",On="_category_1576k_19",Xn="_navTitle_1576k_25",Mn="_subItem_1576k_28",Rn="_checked_1576k_38",In="_content_1576k_41",Fn="_desc_1576k_45",Pn="_descTitle_1576k_45",Ln="_descInfo_1576k_48",j={actionBox:An,menuAction:Yn,category:On,navTitle:Xn,subItem:Mn,checked:Rn,content:In,desc:Fn,descTitle:Pn,descInfo:Ln},Bn=({form:a})=>(T.useEffect(()=>{a.setFieldsValue({jumpType:"route"})},[]),o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"跳转到指定页面。1. 系统内跳转会通过自身路由实现；2. 跨服务跳转主要是基于microApp的父子应用通信方式，主应用需要监听数据，并添加跳转代码；3. 超链接跳转通过window.open或location方式实现；"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"跳转方式",name:"jumpType",children:o.jsxs(N.Group,{buttonStyle:"solid",children:[o.jsx(N.Button,{value:"route",children:"系统内跳转"}),o.jsx(N.Button,{value:"micro",children:"跨服务跳转"}),o.jsx(N.Button,{value:"link",children:"超链接跳转"})]})}),o.jsx(y.Item,{label:"页面地址",name:"url",rules:[{required:!0,message:"请输入跳转地址"}],children:o.jsx(L.TextArea,{placeholder:"请输入页面地址",rows:4})}),o.jsx(y.Item,{noStyle:!0,shouldUpdate:!0,children:()=>a.getFieldValue("jumpType")==="link"?o.jsx(y.Item,{label:"新窗口",name:"isNewWindow",children:o.jsx(Ct,{})}):null})]})),Vn=()=>o.jsx(o.Fragment,{children:o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"刷新当前页面。"}),o.jsx(I,{})]})}),re=()=>{const{modals:a}=H(n=>{const r=[];return Object.values(n.page.pageData.elementsMap).forEach(t=>{(t.type==="SearchForm"||t.type==="Form")&&r.push({id:t.id})}),{modals:r}});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"触发一个事件动作后，可以选择目标表单，调用该表单方法。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"选择表单",name:"target",rules:[{required:!0,message:"请选择表单组件"}],children:o.jsx(k,{children:a.map(n=>o.jsx(k.Option,{value:n.id,children:`${n.id}`},n.id))})})]})},Je=()=>{const{modals:a}=H(n=>{const r=[];return Object.values(n.page.pageData.elementsMap).forEach(t=>{if(t.type==="Modal"){const e=t.config.props.title;r.push({id:t.id,title:typeof e=="string"?e:e.type==="static"?e.value:"动态标题"})}}),{modals:r}});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"触发一个按钮、表单等事件动作后，可以通过此行为来打开一个弹框，前提是需要先创建一个弹框。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"选择弹框",name:"target",rules:[{required:!0,message:"请选择弹框组件"}],children:o.jsx(k,{children:a.map(n=>o.jsx(k.Option,{value:n.id,children:`${n.title} (${n.id})`},n.id))})})]})},Wn=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"通过message组件显示反馈提示。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"提示类型",name:"type",children:o.jsxs(N.Group,{buttonStyle:"solid",optionType:"button",children:[o.jsx(N,{value:"success",children:"成功"}),o.jsx(N,{value:"info",children:"信息"}),o.jsx(N,{value:"warning",children:"警告"}),o.jsx(N,{value:"error",children:"错误"})]})}),o.jsx(y.Item,{label:"提示内容",name:"content",rules:[{required:!0,message:"请输入提示内容"}],children:o.jsx(L,{placeholder:"输入提示内容"})}),o.jsx(y.Item,{label:"持续时间(秒)",name:"duration",tooltip:"单位是秒，表示几秒后，提示消息消失。",rules:[{required:!0,message:"请输入持续时间"}],children:o.jsx(Te,{placeholder:"eg: 3"})})]}),Hn=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"点击一个按钮，可以通过此行为来打开一个消息通知弹框，只需要配置通知内容即可。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"通知类型",name:"type",rules:[{required:!0,message:"请选择弹框类型"}],children:o.jsxs(N.Group,{buttonStyle:"solid",optionType:"button",children:[o.jsx(N.Button,{value:"info",children:"信息"}),o.jsx(N.Button,{value:"success",children:"成功"}),o.jsx(N.Button,{value:"warning",children:"警告"}),o.jsx(N.Button,{value:"error",children:"错误"})]})}),o.jsx(y.Item,{label:"通知标题",name:"message",rules:[{required:!0,message:"请输入标题"}],children:o.jsx(L,{placeholder:"请输入通知标题"})}),o.jsx(y.Item,{label:"通知内容",name:"description",rules:[{required:!0,message:"请输入内容"}],children:o.jsx(L,{placeholder:"请输入通知内容"})}),o.jsx(y.Item,{label:"通知位置",name:"placement",rules:[{required:!0,message:"请选择通知位置"}],children:o.jsxs(k,{placeholder:"请选择通知位置",children:[o.jsx(k.Option,{value:"top",children:"top"}),o.jsx(k.Option,{value:"topLeft",children:"topLeft"}),o.jsx(k.Option,{value:"topRight",children:"topRight"}),o.jsx(k.Option,{value:"bottom",children:"bottom"}),o.jsx(k.Option,{value:"bottomLeft",children:"bottomLeft"}),o.jsx(k.Option,{value:"bottomRight",children:"bottomRight"})]})}),o.jsx(y.Item,{label:"持续时间(秒)",name:"duration",tooltip:"单位是秒，表示几秒后，消息通知消失。",rules:[{required:!0,message:"请输入持续时间"}],children:o.jsx(Te,{placeholder:"eg: 3"})})]}),qn=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"点击一个按钮，可以通过此行为来打开一个确认弹框，只需要配置确认弹框内容即可。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"确认框类型",name:"type",rules:[{required:!0,message:"请选择弹框类型"}],children:o.jsxs(k,{placeholder:"请选择确认框类型",children:[o.jsx(k.Option,{value:"confirm",children:"确认框"}),o.jsx(k.Option,{value:"info",children:"信息框"}),o.jsx(k.Option,{value:"success",children:"成功框"}),o.jsx(k.Option,{value:"warning",children:"警告框"}),o.jsx(k.Option,{value:"error",children:"错误框"})]})}),o.jsx(y.Item,{label:"确认标题",name:"title",rules:[{required:!0,message:"请输入标题"}],children:o.jsx(L,{placeholder:"请输入确认标题"})}),o.jsx(y.Item,{label:"显示内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:o.jsx(L,{placeholder:"请输入确认内容"})}),o.jsx(y.Item,{label:"确认名称",name:"okText",rules:[{required:!0,message:"请输入确认按钮名称"}],children:o.jsx(L,{placeholder:"请输入确认按钮名称"})}),o.jsx(y.Item,{label:"取消名称",name:"cancelText",rules:[{required:!0,message:"请输入取消按钮名称"}],children:o.jsx(L,{placeholder:"请输入取消按钮名称"})})]}),Qe=({type:a})=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"文件下载时，后端接口必须返回Blob对象才可以。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"配置请求",name:"id",rules:[{required:!0,message:"请选择请求接口"}],children:o.jsx(Zn,{})}),a==="download"&&o.jsx(y.Item,{label:"文件名称",name:"filename",tooltip:"优先从请求头获取filename作为文件名称，其次获取此处的文件名称",children:o.jsx(L,{placeholder:"eg: filename.xls"})})]}),Zn=({value:a,onChange:n})=>{const r=H(s=>s.page.pageData.apis),t=T.useRef(),e=()=>{var s;(s=t.current)==null||s.showModal(a)};return o.jsxs(o.Fragment,{children:[o.jsx(k,{placeholder:"请选择接口",showSearch:!0,allowClear:!0,value:a,onChange:n,style:{width:"90%"},children:Object.values(r).map(s=>o.jsx(k.Option,{value:s.id,children:s.name},s.id))}),o.jsx(Dt,{onClick:e,style:{marginLeft:10}}),o.jsx(zt,{update:s=>n(s),ref:t})]})},$n=()=>{const a=H(n=>n.page.pageData.elements);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"触发事件动作后，可以指定目标组件显示和隐藏。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"目标组件",name:"target",rules:[{required:!0,message:"请选择目标组件"}],children:o.jsx(ze,{allowClear:!0,treeData:a,fieldNames:{label:"name",value:"id",children:"elements"},placeholder:"请选择目标组件"})}),o.jsx(y.Item,{label:"显示类型",name:"showType",children:o.jsxs(N.Group,{children:[o.jsx(N,{value:"static",children:"静态"}),o.jsx(N,{value:"expression",children:"表达式"})]})}),o.jsx(y.Item,{noStyle:!0,shouldUpdate:!0,children:n=>n.getFieldValue("showType")==="static"?o.jsx(y.Item,{label:"显示结果",name:"showResult",children:o.jsxs(N.Group,{children:[o.jsx(N,{value:"show",children:"显示"}),o.jsx(N,{value:"hidden",children:"隐藏"})]})}):o.jsx(y.Item,{label:"表达式",name:"expression",children:o.jsx(se,{})})})]})},Gn=()=>{const a=H(n=>n.page.pageData.elements);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"触发事件动作后，可以指定目标组件禁用，目前主要用于表单组件和按钮组件。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"目标组件",name:"target",rules:[{required:!0,message:"请选择目标组件"}],children:o.jsx(ze,{allowClear:!0,treeData:a,fieldNames:{label:"name",value:"id",children:"elements"},placeholder:"请选择目标组件"})}),o.jsx(y.Item,{label:"禁用类型",name:"disableType",children:o.jsxs(N.Group,{children:[o.jsx(N,{value:"static",children:"静态"}),o.jsx(N,{value:"expression",children:"表达式"})]})}),o.jsx(y.Item,{noStyle:!0,shouldUpdate:!0,children:n=>n.getFieldValue("disableType")==="static"?o.jsx(y.Item,{label:"禁用结果",name:"disableResult",children:o.jsxs(N.Group,{children:[o.jsx(N,{value:!1,children:"启用"}),o.jsx(N,{value:!0,children:"禁用"})]})}):o.jsx(y.Item,{label:"表达式",name:"expression",tooltip:"表达式需要返回布尔类型，true为禁用，false为启用",children:o.jsx(se,{readOnly:!0})})})]})},Un=({form:a})=>{const n=H(),[r,t]=T.useState([]),[e,s]=T.useState([]);T.useEffect(()=>{const u=a.getFieldValue("target");if(!u)return;const h=n.page.pageData.elementsMap[u];h&&t(h.methods||[])},[a==null?void 0:a.getFieldValue("target")]);const i=u=>{const h=n.page.pageData.elementsMap[u];h&&t(h.methods||[])},l=u=>{a.setFieldValue("methodName",u)},d=u=>{const h=r.find(f=>f.name===u);h&&(l(h==null?void 0:h.title),s((h==null?void 0:h.params)||[]))};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"事件触发后，可以调用目标组件提供的方法，并自动传入参数。比如：表格的搜索、表单的提交、重置等。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"目标组件",name:"target",rules:[{required:!0,message:"请选择目标组件"}],children:o.jsx(ze,{allowClear:!0,placeholder:"请选择目标组件",treeDefaultExpandAll:!0,fieldNames:{label:"type",value:"id",children:"elements"},treeData:n.page.pageData.elements,onChange:i})}),o.jsx(y.Item,{label:"组件方法",name:"method",rules:[{required:!0,message:"请选择调用的方法"}],children:o.jsx(k,{onChange:u=>d(u),placeholder:"请选择要调用的组件方法",children:r.map(u=>o.jsx(k.Option,{value:u.name,children:u.title},u.name))})}),e.map((u,h)=>o.jsx(y.Item,{label:u.title,name:["params",u.name],rules:[{required:u.required||!1,message:"请选择调用的方法"}],children:u.type==="select"?o.jsx(k,{placeholder:"请选择",options:u.options}):o.jsx(se,{placeholder:"参数值"})},"params"+h)),o.jsx(y.Item,{label:"方法名称",name:"methodName",hidden:!0,children:o.jsx(L,{})})]})},Kn=({form:a})=>{const n=H(s=>s.page.pageData.variables),[r,t]=T.useState("string");T.useEffect(()=>{const s=a.getFieldValue("variableType");t(s)},[]);const e=s=>{var l;const i=(l=n.find(d=>d.name===s))==null?void 0:l.type;t(i),a.setFieldValue("variableType",i)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"给页面全局变量动态赋值。页面中支持绑定动态变量的地方都可以使用此功能来添加动态值。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"赋值类型",name:"assignmentType",children:o.jsxs(N.Group,{buttonStyle:"solid",children:[o.jsx(N.Button,{value:"assignment",children:"变量赋值"}),o.jsx(N.Button,{value:"reset",children:"变量重置"})]})}),o.jsx(y.Item,{label:"选择变量",name:"name",wrapperCol:{span:16},rules:[{required:!0,message:"请选择变量"}],children:o.jsx(k,{onChange:s=>e(s),children:n.map(s=>o.jsx(k.Option,{value:s.name,children:s.name},s.name))})}),o.jsx(y.Item,{label:"数据类型",name:"variableType",hidden:!0,children:o.jsx(L,{})}),o.jsx(y.Item,{noStyle:!0,shouldUpdate:!0,children:s=>{if(s.getFieldValue("assignmentType")==="assignment")return o.jsx(y.Item,{label:"赋值方式",name:"assignmentWay",wrapperCol:{span:16},tooltip:"动态赋值会默认接收上一个行为的数据作为变量值，比如上一个行为是接口请求",rules:[{required:!0,message:"请选择赋值方式"}],children:o.jsxs(N.Group,{buttonStyle:"solid",children:[o.jsx(N.Button,{value:"static",children:"静态赋值"}),o.jsx(N.Button,{value:"dynamic",children:"动态赋值"})]})})}}),o.jsx(y.Item,{noStyle:!0,shouldUpdate:!0,children:s=>{const{assignmentType:i,assignmentWay:l}=s.getFieldsValue();if(i==="assignment"&&l==="static")return o.jsxs(y.Item,{label:"变量值",name:"value",wrapperCol:{span:16},rules:[{required:!0,message:"请输入变量值"}],children:[r==="string"||r==="number"||r==="boolean"?o.jsx(se,{}):null,(r==="array"||r==="object")&&o.jsx(rt,{height:"250px",language:"json"})]})}})]})},Jn=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsxs("p",{className:j.descInfo,children:["复制文本内容至粘贴板，支持模板字符串。例如：https://xxx-v.marsview.com.cn/id?a=","${name}"]}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"复制内容",name:"content",tooltip:"如果内容包含模板语法，请确保事件流的上一步操作返回了改字段。",children:o.jsx(L.TextArea,{placeholder:"输入复制内容，支持模板字符串语法。",rows:5})})]}),Qn=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"触发动作后，会执行setTimeout做延迟。比如：延迟3秒执行下一个任务。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"时间（秒）",name:"duration",rules:[{required:!0,message:"请输入持续时间"}],children:o.jsx(Te,{placeholder:"eg: 3"})})]}),er=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"执行JS脚本，比如修改参数，获取变量、表单值、Store数据，以及对数据进行二次加工。"}),o.jsx(I,{})]}),o.jsx(y.Item,{name:"scripts",rules:[{required:!0,message:"请输入要执行的脚本"}],wrapperCol:{span:24},children:o.jsx(rt,{height:"260px",language:"javascript"})})]}),tr=()=>o.jsx(y.Item,{label:"发送数据",children:o.jsx(y.List,{name:["data"],children:(a,{add:n,remove:r})=>o.jsxs(o.Fragment,{children:[a.map(({name:t})=>o.jsxs(tt,{align:"baseline",style:{marginBottom:20,alignItems:"center"},children:[o.jsx(y.Item,{name:[t,"key"],noStyle:!0,labelCol:{span:0},wrapperCol:{span:24},children:o.jsx(L,{placeholder:"参数名"})}),o.jsx(y.Item,{name:[t,"value"],noStyle:!0,children:o.jsx(se,{placeholder:"参数值"})}),o.jsx(De,{onClick:()=>n({key:""},t+1)}),o.jsx(Nt,{onClick:()=>r(t)})]},"data"+t)),o.jsx(de,{block:!0,style:{marginBottom:10},onClick:()=>n({key:""}),children:"增加参数"})]})})}),et=()=>{const{drawers:a}=H(n=>{const r=[];return Object.values(n.page.pageData.elementsMap).forEach(t=>{if(t.type==="Drawer"){const e=t.config.props.title;r.push({id:t.id,title:typeof e=="string"?e:e.type==="static"?e.value:"动态标题"})}}),{drawers:r}});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:j.desc,children:[o.jsx("h3",{className:j.descTitle,children:"说明"}),o.jsx("p",{className:j.descInfo,children:"触发一个按钮、表单等事件动作后，可以通过此行为来打开一个抽屉，前提是需要先创建一个抽屉。"}),o.jsx(I,{})]}),o.jsx(y.Item,{label:"选择抽屉",name:"target",rules:[{required:!0,message:"请选择抽屉组件"}],children:o.jsx(k,{children:a.map(n=>o.jsx(k.Option,{value:n.id,children:`${n.title} (${n.id})`},n.id))})})]})},nr=(a,n)=>{var x;const[r,t]=T.useState(!1),[e,s]=T.useState({}),[i,l]=T.useState({}),d=[{label:"页面",key:"page-nav",children:[{label:"跳转链接",key:"jumpLink",render:()=>o.jsx(Bn,{form:c})},{label:"刷新页面",key:"reloadPage",render:()=>o.jsx(Vn,{})}]},{label:"表单",key:"form-nav",children:[{label:"表单重置",key:"formReset",render:()=>o.jsx(re,{})},{label:"表单提交",key:"formSubmit",render:()=>o.jsx(re,{})},{label:"表单验证",key:"formValidate",render:()=>o.jsx(re,{})},{label:"表单赋值",key:"formAssignment",render:()=>o.jsx(re,{})},{label:"获取表单值",key:"formGetValue",render:()=>o.jsx(re,{})}]},{label:"弹框",key:"modal-nav",children:[{label:"打开弹框",key:"openModal",render:()=>o.jsx(Je,{})},{label:"关闭弹框",key:"closeModal",render:()=>o.jsx(Je,{})},{label:"打开抽屉",key:"openDrawer",render:()=>o.jsx(et,{})},{label:"关闭抽屉",key:"closeDrawer",render:()=>o.jsx(et,{})},{label:"确认框",key:"showConfirm",render:()=>o.jsx(qn,{})},{label:"全局提示",key:"message",render:()=>o.jsx(Wn,{})},{label:"消息通知",key:"notification",render:()=>o.jsx(Hn,{})}]},{label:"请求",key:"request-nav",children:[{label:"发送请求",key:"request",render:()=>o.jsx(Qe,{type:"request"})},{label:"文件下载",key:"download",render:()=>o.jsx(Qe,{type:"download"})}]},{label:"组件",key:"component-nav",children:[{label:"组件显隐",key:"visible",render:()=>o.jsx($n,{})},{label:"组件禁用",key:"disable",render:()=>o.jsx(Gn,{})},{label:"组件方法",key:"methods",render:()=>o.jsx(Un,{form:c})},{label:"变量赋值",key:"variable",render:()=>o.jsx(Kn,{form:c})}]},{label:"其他",key:"other-nav",children:[{label:"复制内容",key:"copy",render:()=>o.jsx(Jn,{})},{label:"定时器",key:"setTimeout",render:()=>o.jsx(Qn,{})},{label:"脚本运行",key:"script",render:()=>o.jsx(er,{})}]}],u=async()=>{try{await c.validateFields();const p=c.getFieldsValue();if(p.assignmentType==="assignment"&&p.assignmentWay==="static"&&(p.variableType==="array"||p.variableType==="object"))try{p.value=typeof p.value=="string"?JSON.parse(p.value||""):p.value||""}catch(m){console.error(m);return}i.callback({actionType:e.key,actionName:e.label,...p}),t(!1)}catch(p){console.error(p)}},h=()=>{t(!1)},f=p=>{c.resetFields(),p.key==="variable"?c.setFieldsValue({assignmentType:"assignment",assignmentWay:"static"}):p.key==="showConfirm"?c.setFieldsValue({type:"confirm",title:"确认",content:"确定要执行此操作吗？",okText:"确认",cancelText:"取消"}):p.key==="message"?c.setFieldsValue({type:"success",content:"操作成功",duration:3}):p.key==="notification"?c.setFieldsValue({type:"info",message:"通知",description:"操作成功",placement:"topRight",duration:4.5}):p.key==="setTimeout"?c.setFieldsValue({duration:3}):p.key==="visible"?c.setFieldsValue({showType:"static",showResult:"show",expression:""}):p.key==="disable"?c.setFieldsValue({disableType:"static",disableResult:!0,expression:""}):p.key==="sendMessage"?c.setFieldsValue({msgType:"text",content:"你好，我是飞书机器人"}):p.key==="script"&&c.setFieldsValue({scripts:`/**
* 触发动作后，会执行该函数
* 上下文: context
* 变量: variable
* 事件流参数: eventParams
*/
function run(){
    return context.eventParams;
}
`}),s({key:p.key,label:p.label,render:p.render})};T.useImperativeHandle(n,()=>({open(p,m){var w;if(l({callback:m}),c.resetFields(),p!=null&&p.actionType)for(let v=0;v<d.length;v++){const _=(w=d[v].children.filter(b=>b.key===p.actionType))==null?void 0:w[0];if(_){s({key:_.key,label:_.label,render:_.render}),c.setFieldsValue(p);break}}else s({}),c.resetFields();t(!0)}}));const[c]=y.useForm(),g={labelCol:{span:6},wrapperCol:{span:16}};return o.jsx(nt,{title:"事件行为配置",width:800,open:r,okText:"确认",cancelText:"取消",onOk:u,onCancel:h,children:o.jsxs("div",{className:j.actionBox,children:[o.jsx("div",{className:j.menuAction,children:o.jsx("ul",{children:d.map(p=>o.jsxs("li",{className:j.category,children:[o.jsx("span",{className:j.navTitle,children:p.label}),o.jsx("ul",{children:p.children.map(m=>o.jsx("li",{className:`${j.subItem} ${e.key===m.key?j.checked:""}`,onClick:()=>f(m),children:o.jsx("span",{children:m.label})},m.key))})]},p.key))})}),o.jsx("div",{className:j.content,children:o.jsx(y,{form:c,...g,children:e!=null&&e.key?o.jsxs(o.Fragment,{children:[(x=e.render)==null?void 0:x.call(e),o.jsx(tr,{})]}):o.jsx("div",{style:{textAlign:"center",lineHeight:"300px"},children:"请选择要执行的动作"})})})]})})},rr=T.forwardRef(nr);function ir(a,n){const r=T.useRef(),t=T.useRef(),[e,s]=T.useState([]);T.useImperativeHandle(n,()=>({setNodeList(v){v.length===0?s([{id:"start",type:"start",title:"开始"},{id:"end",type:"end",title:"结束"}]):s(()=>[...v])},getNodeList:()=>e}));const i=()=>o.jsxs("div",{className:"start-node",children:[o.jsx("div",{className:"circle-btn",children:"开始"}),o.jsx("span",{className:"arrow-line"}),o.jsx(f,{id:"start"})]}),l=()=>o.jsx("div",{className:"end-node",children:o.jsx("div",{className:"circle-btn gray",children:"结束"})}),d=({node:v})=>o.jsxs("div",{className:"normal-node",children:[o.jsxs("div",{className:`node-info ${v.type}`,onClick:()=>m(v),children:[o.jsx("div",{className:"title",onClick:_=>p(_,v),children:v.title}),o.jsx("div",{className:"content",children:v.content}),o.jsx(it,{className:"icon-del",onClick:_=>x(_,v.id)})]}),o.jsx("span",{className:"arrow-line"}),o.jsx(f,{id:v.id})]}),u=({children:v,id:_})=>o.jsxs("div",{className:"condition-node",children:[o.jsx("div",{className:"title",children:"分支"}),o.jsx("div",{className:"node-list",children:v}),o.jsx("span",{className:"arrow-line"}),o.jsx(f,{id:_})]}),h=({type:v,children:_})=>o.jsxs("div",{className:"node-item",children:[o.jsx("span",{className:"left-line "+v}),o.jsx("span",{className:"right-line "+v}),o.jsx("span",{className:"connect-line"}),o.jsx("div",{className:"normal-container",children:_})]}),f=({id:v})=>o.jsx("span",{className:"add-node-btn",children:o.jsxs("span",{className:"add-icon",children:[o.jsx(De,{style:{fontSize:16,color:"#fff"}}),o.jsxs("div",{className:"popover",children:[o.jsx("a",{onClick:()=>g("normal",v),children:"普通节点"}),o.jsx("a",{onClick:()=>g("condition",v),children:"分支节点"})]})]})}),c=(v=8)=>v===4?Math.random().toString().slice(2,6):Math.random().toString().slice(2,10),g=(v,_)=>{var S;v==="normal"?(S=r.current)==null||S.open("节点"+c(4),z=>{b(z)}):b("");function b(z){const E=le(e),C=ee(E,_);if(!C)return;const D=C.parentNode,P=(D?D.children:E)[C.index+1];if(P&&P.type==="condition"&&v==="condition"){G.error("分支节点前一个节点不能添加分支节点");return}const X={id:c(),type:v,title:z,content:"行为配置",config:{},children:[]};switch(D==null?void 0:D.type){case void 0:if(v==="normal")E.splice(C.index+1,0,X);else{if(C.selfNode.type==="start"){G.error("开始节点后第一个节点不能添加分支节点");return}if(C.selfNode.type==="condition"){G.error("分支节点后第一个节点不能添加分支节点");return}E.splice(C.index+1,0,{...X,children:[{id:c(),type:"success",children:[],title:"成功",content:"成功时执行此流程"},{id:c(),type:"fail",title:"失败",content:"失败时执行此流程",children:[]}]})}break;case"success":case"fail":if(C.selfNode.type==="condition"&&v==="condition"){G.error("分支节点后第一个节点不能添加分支节点");return}C.parentNode.children.splice(C.index+1,0,{...X,children:[{...X,id:c(),type:"success",title:"成功",content:"成功时执行此流程",children:[]},{...X,id:c(),type:"fail",title:"失败",content:"失败时执行此流程",children:[]}]});break;case"normal":C.parentNode.children.splice(C.index+1,0,X);break;case"condition":if(v==="condition"){G.error("分支节点后第一个节点不能添加分支节点");return}C.parentNode.children[C.index].children.unshift(X);break}s(()=>[...E])}},x=(v,_)=>{var z,E,C;v.stopPropagation();const b=le(e),S=ee(b,_);if(S){if(!S.parentNode)b.splice(S.index,1);else if(["success","fail","normal"].includes((z=S==null?void 0:S.parentNode)==null?void 0:z.type))S.parentNode.children.splice(S.index,1);else if(((E=S==null?void 0:S.parentNode)==null?void 0:E.type)==="condition"){const D=ee(b,(C=S==null?void 0:S.parentNode)==null?void 0:C.id);if(!D)return;D.parentNode?D.parentNode.children.splice(D.index,1):b.splice(D.index,1)}s(()=>[...b])}},p=(v,_)=>{var b;v.stopPropagation(),!(_.title==="成功"||_.title==="失败")&&((b=r.current)==null||b.open(_.title,S=>{const z=le(e),E=ee(z,_.id);E&&(E.selfNode.title=S,s(()=>[...z]))}))},m=v=>{var _;if(v.title==="成功"||v.title==="失败"){G.info("请在此节点后新增执行节点");return}(_=t.current)==null||_.open(v.config,b=>{const S=le(e),z=ee(S,v.id);z&&(z.selfNode.content=b.actionName,z.selfNode.config=b,s(()=>[...S]))})};function w(v){return v.map(_=>{switch(_.type){case"start":return o.jsx(i,{},_.id);case"end":return o.jsx(l,{},_.id);case"normal":case"success":case"fail":return o.jsx(d,{node:_},_.id);case"condition":return o.jsx(u,{title:_.title,id:_.id,children:_.children.map((b,S)=>o.jsxs(h,{type:S===0?"start":S==_.children.length-1?"end":"center",children:[w([b]),w(b.children)]},b.id))},_.id)}})}return o.jsxs(o.Fragment,{children:[o.jsx(Dn,{className:"node-viewer dot",displayHorizontalScroll:!1,useMouseDrag:!0,useWheelScroll:!0,useAutoZoom:!0,zoomRange:[.5,10],zoom:1.5,useResizeObserver:!0,children:o.jsx("div",{className:"node-container",children:w(e)})}),o.jsx(kn,{ref:r}),o.jsx(rr,{ref:t})]})}const or=T.forwardRef(ir);function sr(a,n){const[r,t]=T.useState(!1),[e,s]=T.useState(),i=T.useRef(null);T.useImperativeHandle(n,()=>({open(u,h){s({callback:h}),t(!0),setTimeout(()=>{var f;(f=i.current)==null||f.setNodeList(u)})}}));const l=()=>{var h;const u=(h=i.current)==null?void 0:h.getNodeList();e==null||e.callback(u),t(!1)},d=()=>{t(!1)};return o.jsxs(kt,{title:"事件流配置",width:"100vw",height:"100vh",placement:"top",push:!1,open:r,closeIcon:null,onClose:d,extra:o.jsx(o.Fragment,{children:o.jsxs(tt,{children:[o.jsx(de,{type:"primary",onClick:l,children:"保存"}),o.jsx(de,{onClick:d,children:"关闭"})]})}),children:[o.jsx(At,{message:"使用说明",description:o.jsxs("div",{children:[o.jsx("p",{children:"1. 事件流从左到右按顺序执行。"}),o.jsx("p",{children:"2. 参数会在事件流中流转，比如点击表格的编辑按钮，事件流默认可以取到表格对应的行数据对象，传递到下一个节点。"}),o.jsx("p",{children:"3. 可以通过脚本运行来干预数据输出和下一个节点的流转。"}),o.jsx("p",{children:"4. 获取表单数据时，可以直接点开行为配置，点击获取表单值，选择对应表单即可。"})]}),type:"info",showIcon:!0,style:{position:"absolute",top:100,zIndex:99}}),o.jsx(or,{ref:i})]})}const ar=T.forwardRef(sr),lr="_event_bypo5_1",cr="_title_bypo5_5",ur="_ml5_bypo5_20",hr="_addAction_bypo5_23",dr="_eventFlow_bypo5_27",U={event:lr,title:cr,ml5:ur,addAction:hr,eventFlow:dr},si=T.memo(()=>{var l,d,u;const a=T.useRef(),n=H(),[r]=y.useForm();T.useEffect(()=>{var f;r.resetFields();let h=[];n.selectedElement?h=(((f=n.page.pageData.elementsMap[n.selectedElement.id])==null?void 0:f.config)||{}).events||[]:h=n.page.pageData.config.events||[],r.setFieldsValue({events:h})},[n.selectedElement]);const t=(l=n.selectedElement)!=null&&l.id?(u=(d=n.page.pageData.elementsMap[n.selectedElement.id])==null?void 0:d.events)==null?void 0:u.map(h=>({key:h.value,label:h.name})):n.page.pageData.events.map(h=>({key:h.value,label:h.name})),e=(h,f)=>{var c;(c=n.selectedElement)!=null&&c.id?n.editElement({id:n.selectedElement.id,type:"events",events:f.events||[]}):n.savePageInfo({type:"events",events:f.events||[]})},s=h=>{var f;(f=a.current)==null||f.open(r.getFieldValue(["events",h,"actions"]),c=>{r.setFieldValue(["events",h,"actions"],c),e(null,r.getFieldsValue())})},i={labelCol:{span:7},wrapperCol:{span:15}};return o.jsxs(o.Fragment,{children:[o.jsx(y,{form:r,...i,onValuesChange:e,children:o.jsx("div",{style:{marginBottom:10},children:o.jsx(y.List,{name:["events"],children:(h,{add:f,remove:c})=>o.jsxs(o.Fragment,{children:[o.jsx("div",{className:U.event,children:o.jsx(Tt,{menu:{items:t,onClick:({key:g})=>{var p;const x=(p=t==null?void 0:t.find(m=>(m==null?void 0:m.key)===g))==null?void 0:p.label;f({nickName:x,eventName:g,actions:[]})}},placement:"bottom",children:o.jsxs("a",{onClick:g=>g.preventDefault(),children:[o.jsx(De,{}),o.jsx("span",{className:U.ml5,children:"添加事件"})]})})}),h.map(({key:g,name:x})=>o.jsxs("div",{className:U.eventFlow,children:[o.jsxs("h2",{className:U.title,children:[o.jsx("span",{children:r.getFieldValue(["events",x,"nickName"])}),o.jsx(it,{onClick:()=>c(x),className:U.ml5})]}),o.jsx("div",{className:U.addAction,children:o.jsx(de,{type:"primary",onClick:()=>s(x),children:"设置事件流"})})]},"event"+g))]})})})}),o.jsx(ar,{ref:a})]})});export{si as default};
