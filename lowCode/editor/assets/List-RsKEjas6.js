import{r as i,a as N,j as p,B as Y,k as h}from"./index-CY1Ymj4r.js";import{i as k}from"./index-C4qQ40vK.js";import{f as x,a as v}from"./util-UBnOudtO.js";import{handleApi as w}from"./handleApi-Bz3x1xZ4.js";import{handleActionFlow as R}from"./action-BWjACvR_.js";import{L as n}from"./index-BX8mFvI3.js";import{T as j}from"./index-BcUfWEv4.js";import{A as T}from"./index-BC5zvAmk.js";import"./AlignRightOutlined-BaOygGam.js";import"./UsergroupAddOutlined-DQ7Kwpsy.js";import"./RedoOutlined-CJagRpK4.js";import"./SwapRightOutlined-CcIdOt_e.js";import"./CaretDownOutlined-fvgXmNbc.js";import"./FilterFilled-S1ql0Sss.js";import"./ExclamationCircleOutlined-CkY-Dzll.js";import"./SoundOutlined-B7v31N9V.js";import"./CopyOutlined-CQbFHu9s.js";import"./DeleteOutlined-BfdCKHnO.js";import"./MoreOutlined-BHx2P-s-.js";import"./DoubleRightOutlined-BcWxf5hS.js";import"./DownOutlined-QYs-kCMH.js";import"./EditOutlined-JZ6BD8WC.js";import"./EnterOutlined-DS0cowoX.js";import"./EyeInvisibleOutlined-DDX5Jvzv.js";import"./EyeOutlined-B6CobvGR.js";import"./PlusSquareOutlined-D3cnUxWk.js";import"./FolderOpenOutlined-CDyAvlLT.js";import"./FunctionOutlined-D3UO96Yh.js";import"./HolderOutlined-E1hrqN51.js";import"./InfoCircleOutlined-DWZ7nUzE.js";import"./TeamOutlined-BmFXVwN3.js";import"./NotificationOutlined-C3CDmrw2.js";import"./MinusOutlined-CsSa3QgW.js";import"./QuestionCircleOutlined-TTJW15q1.js";import"./SaveOutlined-CRp1-oFH.js";import"./ZoomOutOutlined-t4Key8LE.js";import"./SearchOutlined-DZ2l1XJ5.js";import"./SettingOutlined-B7WTL30f.js";import"./SyncOutlined-SA527A4F.js";import"./UpOutlined-Bu3BOxje.js";import"./WarningFilled-k-vsk_P7.js";import"./LockOutlined-Bzfo-a2y.js";import"./PlusOutlined-dRNvmZ2Y.js";import"./UserOutlined-CjZcwOl4.js";import"./index-yDMkoRSw.js";import"./_baseGet-C1wBFXxd.js";import"./request-K5LtYnQH.js";import"./useComponentRefs-BjsmN1lJ.js";import"./extendsObject-keMuGWqj.js";import"./row-C5ps4gU6.js";import"./useShowArrow-C9phI0pM.js";import"./List-CfIaGhIa.js";import"./index-DYezmHfp.js";import"./useIcons-CYuILU2n.js";import"./useBreakpoint-D-Sgac-T.js";import"./useForceUpdate-BsEHW89a.js";import"./Pagination-BhehRHa0.js";import"./index-CUKOry-Y.js";import"./useVariants-B4R8rkTL.js";import"./index-C1u3Ql-g.js";const z=({id:A,type:L,config:t},D)=>{var c;const[I,l]=i.useState([]),[f,d]=i.useState(!0),S=N(e=>e.page.pageData.variableData);i.useEffect(()=>{u({})},[t.api,((c=t.api)==null?void 0:c.sourceType)=="variable"?S:""]);const u=e=>{w(t.api,e).then(r=>{(r==null?void 0:r.code)===0&&(Array.isArray(r.data)?l(r.data):(console.error("[List]","data数据格式错误，请检查"),l([])))})};i.useImperativeHandle(D,()=>({show(){d(!0)},hide(){d(!1)},update:e=>{u(e)}}));const b=e=>{var s;const r=e[(s=t.props.content)==null?void 0:s.name],o=t.props.content.type;if(!r||!o||o==="text")return r;if(o==="money")return x(r,"currency");if(o==="number")return x(r);if(o==="date1")return v(r,"YYYY-MM-DD");if(o==="date2")return v(r);if(o==="tag")return Array.isArray(r)?r.map((a,y)=>p.jsx(j,{children:a},y)):typeof r=="string"||typeof r=="number"?p.jsx(j,{children:r}):r==null?void 0:r.toString()},E=(e,r={})=>{const o=t.events.find(s=>s.eventName===e);R(o==null?void 0:o.actions,r)},m=k,M=(e,r)=>r.props.avatar&&e[r.props.avatar]?p.jsx(T,{src:e[r.props.avatar]}):r.props.useIcon&&r.props.icon&&m[e[r.props.icon]]?h.createElement(m[e[r.props.icon]]):null;return f&&p.jsx(n,{"data-id":A,"data-type":L,itemLayout:t.props.itemLayout,style:t.style,bordered:t.props.bordered,size:t.props.size,split:t.props.split,header:t.props.header?p.jsx("div",{children:t.props.header}):null,footer:t.props.footer?p.jsx("div",{children:t.props.footer}):null,dataSource:I,renderItem:e=>{var r,o,s;return p.jsxs(n.Item,{actions:((r=t.props.bulkActionList)==null?void 0:r.map((a,y)=>p.jsx(Y,{type:a.type,danger:a.danger,icon:a.icon?h.createElement(m[a.icon]):null,onClick:()=>E(a.eventName,e),children:a.text},a.eventName)))||[],children:[p.jsx(n.Item.Meta,{avatar:M(e,t),title:(o=t.props.title)!=null&&o.name?p.jsx("span",{style:{color:t.props.title.color},children:e[t.props.title.name]}):null,description:t.props.desc.name?p.jsx("span",{style:{color:t.props.desc.color},children:e[t.props.desc.name]}):null}),(s=t.props.content)!=null&&s.name?p.jsx("div",{style:{color:t.props.content.color},children:b(e)}):null]})}})},Vr=i.forwardRef(z);export{Vr as default};
