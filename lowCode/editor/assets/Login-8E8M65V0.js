import{r as x,u as d,a as g,j as e,B as _,l as h,s as j}from"./index-CY1Ymj4r.js";import{F as t}from"./index-BKDg-K48.js";import{I as i}from"./index-Du8QL6nv.js";import{R as q}from"./UserOutlined-CjZcwOl4.js";import{R as v}from"./LockOutlined-Bzfo-a2y.js";import"./row-C5ps4gU6.js";import"./QuestionCircleOutlined-TTJW15q1.js";import"./index-C1u3Ql-g.js";import"./BaseInput-Bka7TPzR.js";import"./TextArea-U5uDgpR6.js";import"./useVariants-B4R8rkTL.js";import"./EyeInvisibleOutlined-DDX5Jvzv.js";import"./EyeOutlined-B6CobvGR.js";import"./SearchOutlined-DZ2l1XJ5.js";const w="_container_1xqam_1",y="_login_1xqam_8",I="_left_1xqam_18",N="_form_1xqam_26",C="_title_1xqam_30",R="_resetContainer_1xqam_40",b="_header_1xqam_45",k="_content_1xqam_52",F="_account_1xqam_67",s={container:w,login:y,left:I,form:N,title:C,resetContainer:R,header:b,content:k,account:F};function J(){const[c,o]=x.useState(!1),n=d(),[m]=t.useForm(),l=g(r=>r.saveUserInfo),p=async r=>{o(!0);try{const a=await h(r);if(o(!1),a.token)if(j.set("token",a.token),l(a),location.search){const f=new URLSearchParams(location.search);setTimeout(()=>{const u=new URL(f.get("callback"));n(u.pathname||"/projects")})}else n("/projects")}catch{o(!1)}};return e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.login,children:[e.jsx("div",{className:s.left,children:e.jsx("img",{src:"/imgs/login-bg.png"})}),e.jsxs("div",{className:s.form,children:[e.jsxs("div",{className:s.title,children:[e.jsx("img",{src:"/imgs/mars-logo.png",width:45}),e.jsx("span",{children:"Marsview"})]}),e.jsxs(t,{name:"basic",layout:"vertical",className:s.form,onFinish:p,size:"large",form:m,children:[e.jsx(t.Item,{name:"userName",rules:[{required:!0,message:"请输入邮箱"},{pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"请输入正确的邮箱"}],children:e.jsx(i,{prefix:e.jsx(q,{}),placeholder:"请输入个人邮箱",autoComplete:"off",allowClear:!0})}),e.jsx(t.Item,{style:{marginTop:32},name:"userPwd",rules:[{required:!0,message:"请输入密码"}],children:e.jsx(i.Password,{prefix:e.jsx(v,{}),autoComplete:"off",allowClear:!0,placeholder:"请输入密码"})}),e.jsx(t.Item,{style:{marginTop:40},children:e.jsx(_,{type:"primary",block:!0,htmlType:"submit",loading:c,children:"登录"})})]})]})]})})}export{J as default};
