import{r,H as j,m as h,j as t,ah as g,B as i,S as b}from"./index-CY1Ymj4r.js";import{a as l,M as y}from"./MemberSetting-Dyc_XqzB.js";import{R as I}from"./PlusOutlined-dRNvmZ2Y.js";import{R}from"./SyncOutlined-SA527A4F.js";import{L as s}from"./index-BX8mFvI3.js";import{R as L}from"./UserOutlined-CjZcwOl4.js";import"./index-BKDg-K48.js";import"./row-C5ps4gU6.js";import"./QuestionCircleOutlined-TTJW15q1.js";import"./index-ClLmsWSS.js";import"./index-Du8QL6nv.js";import"./index-C1u3Ql-g.js";import"./BaseInput-Bka7TPzR.js";import"./TextArea-U5uDgpR6.js";import"./useVariants-B4R8rkTL.js";import"./EyeInvisibleOutlined-DDX5Jvzv.js";import"./EyeOutlined-B6CobvGR.js";import"./SearchOutlined-DZ2l1XJ5.js";import"./index-CrCWvzoA.js";import"./index-CVwKh-ii.js";import"./extendsObject-keMuGWqj.js";import"./useShowArrow-C9phI0pM.js";import"./List-CfIaGhIa.js";import"./index-DYezmHfp.js";import"./useIcons-CYuILU2n.js";import"./DownOutlined-QYs-kCMH.js";import"./useBreakpoint-D-Sgac-T.js";import"./useForceUpdate-BsEHW89a.js";import"./Pagination-BhehRHa0.js";import"./DoubleRightOutlined-BcWxf5hS.js";import"./index-CUKOry-Y.js";const et=()=>{const[d,a]=r.useState(!1),[n,m]=r.useState([]),p=r.useRef(),{id:c}=j();r.useEffect(()=>{o()},[]);const o=async()=>{if(!c)return h.error("当前页面不存在");a(!0);const e=await l.getMemberList({pageId:parseInt(c)});m(e.list),a(!1)},f=()=>{var e;(e=p.current)==null||e.open(2)},x=async e=>{await l.deletePageMember({id:e}),m(n.filter(u=>u.id!=e))};return t.jsxs(t.Fragment,{children:[t.jsxs(g,{justify:"space-between",align:"center",style:{borderBottom:"1px solid var(--mars-theme-card-border-color)"},children:[t.jsx(i,{type:"link",icon:t.jsx(I,{}),onClick:()=>f(),children:"新增"}),t.jsx(i,{type:"link",icon:t.jsx(R,{}),onClick:o,children:"刷新"})]}),t.jsx(b,{spinning:d,children:t.jsx(s,{style:{height:"calc(100vh - 150px)",overflowY:"auto"},itemLayout:"horizontal",dataSource:n,renderItem:e=>t.jsx(s.Item,{actions:[t.jsx(i,{type:"link",onClick:()=>x(e.id),children:"删除"})],children:t.jsx(s.Item.Meta,{avatar:t.jsx(L,{}),title:t.jsx("span",{children:e.userName}),description:e.role==1?"开发者":"体验者"})})})}),t.jsx(y,{ref:p,update:o})]})};export{et as default};
