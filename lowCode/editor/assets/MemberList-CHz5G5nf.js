import{r,H as j,m as h,j as t,ah as g,B as i,S as b}from"./index-DmOc0qNU.js";import{a as l,M as y}from"./MemberSetting-nztnsBie.js";import{R as I}from"./PlusOutlined-BSTEPWl7.js";import{R}from"./SyncOutlined-D_H3wSeZ.js";import{L as s}from"./index-CW6BFuNZ.js";import{R as L}from"./UserOutlined-DAUrDjKa.js";import"./index-1_6nT-oA.js";import"./row-pIc0FM19.js";import"./QuestionCircleOutlined-Dza1yYuv.js";import"./index-_pMv_sKm.js";import"./index-B-YUPJxN.js";import"./index-DOHCQObp.js";import"./BaseInput-4F0kfgVN.js";import"./TextArea-D7VuO_-I.js";import"./useVariants-BdxfBOl3.js";import"./EyeInvisibleOutlined-Cl_PTdo5.js";import"./EyeOutlined-QFSiY36E.js";import"./SearchOutlined-DscCkqW9.js";import"./index-DxJl0Bxc.js";import"./index-B5-G8EA2.js";import"./extendsObject-keMuGWqj.js";import"./useShowArrow-CIjY5B73.js";import"./List-BV6fBbjc.js";import"./index-wVmnK_0F.js";import"./useIcons-CLAJNkrF.js";import"./DownOutlined-DnWdyoG8.js";import"./useBreakpoint-Dj2PHoq7.js";import"./useForceUpdate-Y5LXbfsE.js";import"./Pagination-B_kLQQfV.js";import"./DoubleRightOutlined-FRvrxn3q.js";import"./index-DSaINUG7.js";const et=()=>{const[d,a]=r.useState(!1),[n,m]=r.useState([]),p=r.useRef(),{id:c}=j();r.useEffect(()=>{o()},[]);const o=async()=>{if(!c)return h.error("当前页面不存在");a(!0);const e=await l.getMemberList({pageId:parseInt(c)});m(e.list),a(!1)},f=()=>{var e;(e=p.current)==null||e.open(2)},x=async e=>{await l.deletePageMember({id:e}),m(n.filter(u=>u.id!=e))};return t.jsxs(t.Fragment,{children:[t.jsxs(g,{justify:"space-between",align:"center",style:{borderBottom:"1px solid var(--mars-theme-card-border-color)"},children:[t.jsx(i,{type:"link",icon:t.jsx(I,{}),onClick:()=>f(),children:"新增"}),t.jsx(i,{type:"link",icon:t.jsx(R,{}),onClick:o,children:"刷新"})]}),t.jsx(b,{spinning:d,children:t.jsx(s,{style:{height:"calc(100vh - 150px)",overflowY:"auto"},itemLayout:"horizontal",dataSource:n,renderItem:e=>t.jsx(s.Item,{actions:[t.jsx(i,{type:"link",onClick:()=>x(e.id),children:"删除"})],children:t.jsx(s.Item.Meta,{avatar:t.jsx(L,{}),title:t.jsx("span",{children:e.userName}),description:e.role==1?"开发者":"体验者"})})})}),t.jsx(y,{ref:p,update:o})]})};export{et as default};
