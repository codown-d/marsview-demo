import{r,a as I,H as M,j as e}from"./index-DmOc0qNU.js";import{F as l}from"./index-1_6nT-oA.js";import{M as v}from"./index-_pMv_sKm.js";import{I as y}from"./index-B-YUPJxN.js";import{R as i}from"./index-DxJl0Bxc.js";const F={async getMemberList(a){return{list:[{id:1,pageId:1e5,role:1,userId:1e5,userName:"demo@qq.com"}]}},async addPageMember(a){return""},async deletePageMember(a){return""}},S=(a,c)=>{const[u,d]=r.useState(!1),[p,o]=r.useState(!1),[s,f]=r.useState(1),g=I(n=>n.page.id),[t]=l.useForm(),x=M().id;r.useImperativeHandle(c,()=>({open(n){f(n),d(!0)}}));const b=async()=>{if(!await t.validateFields())return;const{role:h,userName:j}=t.getFieldsValue();try{o(!0),await F.addPageMember({type:s,pageId:s==1?parseInt(x):g,role:h,userName:j}),o(!1),m(),a==null||a.update()}catch{o(!1)}},m=()=>{t.resetFields(),d(!1)};return e.jsx(v,{title:s===1?"添加开发者":"添加页面成员",open:u,confirmLoading:p,onOk:b,onCancel:m,okText:"提交",cancelText:"取消",children:e.jsxs(l,{form:t,labelCol:{span:6},wrapperCol:{span:16},initialValues:{role:1},children:[e.jsx(l.Item,{label:"用户",name:"userName",rules:[{required:!0,message:"请输入用户邮箱"}],extra:"不支持模糊搜索，请精准输入用户邮箱。",children:e.jsx(y,{placeholder:"请输入用户邮箱"})}),e.jsx(l.Item,{label:"角色",name:"role",rules:[{required:!0,message:"请选择角色"}],extra:"开发者拥有修改权限，体验者只有访问权限。",children:e.jsxs(i.Group,{children:[e.jsx(i,{value:1,children:"开发者"}),s==2?e.jsx(i,{value:2,children:"体验者"}):null]})})]})})},L=r.forwardRef(S);export{L as M,F as a};
