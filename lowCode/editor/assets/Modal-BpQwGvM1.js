import{r as i,a as D,j as o,B as k,k as q,S as B}from"./index-DmOc0qNU.js";import{g as F}from"./index-D_sh-7v0.js";import{M as I}from"./MarsRender-CU_k9oCt.js";import{i as T}from"./index-C3QLbPSd.js";import{handleActionFlow as $}from"./action-CbrbshM_.js";import{M as H}from"./index-_pMv_sKm.js";import{u as P}from"./useDrop-BKAPRNi5.js";import"./useComponentRefs-BjsmN1lJ.js";import"./shallow-DkvW6rgF.js";import"./SoundOutlined-C2LYByLL.js";import"./DownOutlined-DnWdyoG8.js";import"./UpOutlined-CkYvBYD1.js";import"./index-CcJLco_Z.js";import"./index-1_6nT-oA.js";import"./row-pIc0FM19.js";import"./QuestionCircleOutlined-Dza1yYuv.js";import"./scrollTo-D0zr6O2z.js";import"./index-DSaINUG7.js";import"./useShowArrow-CIjY5B73.js";import"./List-BV6fBbjc.js";import"./index-wVmnK_0F.js";import"./useIcons-CLAJNkrF.js";import"./SearchOutlined-DscCkqW9.js";import"./useVariants-BdxfBOl3.js";import"./index-Df3uJrKd.js";import"./useBreakpoint-Dj2PHoq7.js";import"./useForceUpdate-Y5LXbfsE.js";import"./index-BIB-vVSn.js";import"./SwapRightOutlined-l_ApuJtI.js";import"./index-DOHCQObp.js";import"./index-DxJl0Bxc.js";import"./index-B5-G8EA2.js";import"./index-PKq6ibgt.js";import"./index-Dg1x3Ybx.js";import"./PlusOutlined-BSTEPWl7.js";import"./index-DfZhUM4Q.js";import"./conductUtil-wNhCxpcs.js";import"./index-B2mTmS5H.js";import"./index-Bp74baIv.js";import"./ColorPicker-CHwPjknD.js";import"./index-Do4qj9dd.js";import"./index-eEpHjpWF.js";import"./index-o7l-rjNw.js";import"./BaseInput-4F0kfgVN.js";import"./index-B-YUPJxN.js";import"./TextArea-D7VuO_-I.js";import"./EyeInvisibleOutlined-Cl_PTdo5.js";import"./EyeOutlined-QFSiY36E.js";import"./index-C-pH6dK5.js";import"./index-DIJm4IIM.js";import"./index-jIBCjwxt.js";import"./addEventListener-CKCD8Vpz.js";import"./ZoomOutOutlined-IpS0JADO.js";import"./index-CW6BFuNZ.js";import"./extendsObject-keMuGWqj.js";import"./Pagination-B_kLQQfV.js";import"./DoubleRightOutlined-FRvrxn3q.js";import"./index-BytaExX6.js";import"./EditOutlined-D6nYSc60.js";import"./styleChecker-CQ-R2cXJ.js";import"./EnterOutlined-D0ebLqDC.js";import"./index-C0E5Fhz-.js";import"./CopyOutlined-BRIAy90h.js";import"./index-CAhQjzfH.js";import"./index-B6d_3ZHh.js";import"./PlusSquareOutlined-D0i2U-a9.js";import"./FolderOpenOutlined-Bj6jPccg.js";import"./HolderOutlined-CzOeoeCY.js";import"./index-DBzmE0wc.js";import"./index-zUAcsxVR.js";import"./WarningFilled-DrN-C8wT.js";import"./index-9ch0MKpQ.js";import"./index-DFI99UhQ.js";import"./index-KkE6TN4K.js";import"./Table-ChTYBmDg.js";import"./FilterFilled-BYB9ZItm.js";import"./CaretDownOutlined-Cvfi80LL.js";import"./DeleteOutlined-BnUSKaGo.js";import"./createLoading-4QOu0SEw.js";import"./debounce-CoSCf5Zb.js";import"./index-Dbrwdd6Z.js";import"./index-BUKMMZAh.js";import"./index-BmnSvrnD.js";import"./index-DYQX7UPG.js";import"./util-DNkFm-j2.js";import"./_baseGet-xRkAGEE7.js";/* empty css              */import"./omit-K9EDc_4o.js";import"./AlignRightOutlined-Kg291cY_.js";import"./UsergroupAddOutlined-Bx2neJ9_.js";import"./RedoOutlined-C4rr1ZME.js";import"./ExclamationCircleOutlined-DHCAK7Yp.js";import"./MoreOutlined-C8o90ux3.js";import"./FunctionOutlined-Dm0pzJNb.js";import"./InfoCircleOutlined-D9lj3ic_.js";import"./TeamOutlined-B9XPKo8Z.js";import"./NotificationOutlined-DlRBMYlM.js";import"./MinusOutlined-Cj88Lgeh.js";import"./SaveOutlined-Da_V74JD.js";import"./SettingOutlined-CGW_ik-t.js";import"./SyncOutlined-D_H3wSeZ.js";import"./LockOutlined-COu0XHB3.js";import"./UserOutlined-DAUrDjKa.js";import"./handleApi-CJLwph67.js";import"./request-C0MTnMVW.js";import"./useDragDropManager-Dl0-aEZk.js";const O=i.forwardRef(({id:m,type:f,config:e,elements:u,onLoad:a,onOk:l,onCancel:d},S)=>{const[s,c]=i.useState(!1),[E,h]=i.useState(e.props.confirmLoading||!1),[j,g]=i.useState(!1),{addChildElements:C,setSelectedElement:y}=D(t=>({addChildElements:t.addChildElements,setSelectedElement:t.setSelectedElement})),[,w]=P({accept:"MENU_ITEM",async drop(t,r){var v;if(r.didDrop())return;const{config:p,events:b,methods:A=[]}=((v=await F(t.type+"Config"))==null?void 0:v.default)||{};C({type:t.type,name:t.name,parentId:m,id:t.id,config:p,events:b,methods:A})},collect:t=>({isOver:t.isOver(),canDrop:t.canDrop()})});i.useImperativeHandle(S,()=>({close:()=>{c(!1)},open:()=>new Promise(t=>{c(!0),setTimeout(()=>{t(!0),y({id:m,type:f})},0)}),showConfirmLoading:()=>{h(!0)},hideConfirmLoading:()=>{h(!1)},showLoading:()=>{g(!0)},hideLoading:()=>{g(!1)}}),[]),i.useEffect(()=>{var p;s&&(a==null||a());const t=(p=document.querySelector("#page"))==null?void 0:p.getBoundingClientRect(),r=document.querySelector(`[data-id="${m}"]`);r&&(r.style.height=(t==null?void 0:t.height)+"px")},[s]);const M=()=>{l==null||l()},L=()=>{d==null||d(),c(!1),setTimeout(()=>{y(void 0)},0)},n=document.querySelector(`[data-id="${m}"]`);s&&n?n.style.display="":n&&(n.style.display="none");const N=t=>{const r=e.events.find(p=>p.eventName===t);$(r==null?void 0:r.actions,{})},x=e.props.bulkActionList||[],R=T;return o.jsx(o.Fragment,{children:o.jsx(H,{...e.props,"data-id":m,"data-type":f,open:s,getContainer:!1,onOk:M,maskClosable:!1,onCancel:L,width:e.props.width||void 0,confirmLoading:E,footer:x.length>0?o.jsx(o.Fragment,{children:x.map((t,r)=>o.jsx(k,{type:t.type,danger:t.danger,icon:t.icon?q.createElement(R[t.icon]):null,onClick:()=>N(t.eventName),children:t.text},t.eventName))}):void 0,style:{...e.style},children:o.jsx("div",{ref:w,children:o.jsx(B,{spinning:j,children:u.length?o.jsx(I,{elements:u}):o.jsx("div",{className:"slots",style:{lineHeight:"150px"},children:"拖拽组件到这里"})})})})})}),Oo=i.memo(O);export{Oo as default};
