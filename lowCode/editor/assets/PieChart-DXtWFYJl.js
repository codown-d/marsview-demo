import{r as a,a as v,j as s,S as y}from"./index-DmOc0qNU.js";import{P}from"./index-DYQX7UPG.js";import"./createLoading-4QOu0SEw.js";import{handleApi as S}from"./handleApi-CJLwph67.js";import"./debounce-CoSCf5Zb.js";import"./request-C0MTnMVW.js";import"./util-DNkFm-j2.js";import"./index-C0E5Fhz-.js";import"./_baseGet-xRkAGEE7.js";const b=({id:d,type:u,config:t,apis:g},m)=>{var n;const[c,i]=a.useState([]),[h,o]=a.useState(!0),[f,p]=a.useState(!0),x=v(e=>e.page.pageData.variableData);a.useEffect(()=>{l({})},[t.api,((n=t.api)==null?void 0:n.sourceType)=="variable"?x:""]);const l=e=>{o(!0),S(t.api,e).then(r=>{(r==null?void 0:r.code)===0&&(Array.isArray(r.data)?i(r.data):(i([]),console.error("[PieChart]数据格式错误")),o(!1))})};return a.useImperativeHandle(m,()=>({show(){p(!0)},hide(){p(!1)},update:e=>{l(e)}})),f&&s.jsx("div",{"data-id":d,"data-type":u,style:t.style,children:s.jsx(y,{spinning:h,size:"large",wrapperClassName:"spin-loading",children:s.jsx(P,{...t.props,data:c})})})},z=a.forwardRef(b);export{z as default};
