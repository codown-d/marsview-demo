import{r as m,j as s,f as o,m as c}from"./index-CY1Ymj4r.js";import{h as d,f as h}from"./util-UBnOudtO.js";import{useFormContext as x}from"./context-lPMLs1NY.js";import{F as p}from"./index-BKDg-K48.js";import{I as j}from"./index-BH8xWKmO.js";import"./index-yDMkoRSw.js";import"./_baseGet-C1wBFXxd.js";import"./row-C5ps4gU6.js";import"./QuestionCircleOutlined-TTJW15q1.js";import"./EyeOutlined-B6CobvGR.js";import"./addEventListener-e8APPF7k.js";import"./ZoomOutOutlined-t4Key8LE.js";const I=({id:t,type:r,config:e},a)=>{const{initValues:l}=x(),[f,i]=m.useState(!0);return m.useEffect(()=>{var n;const u=(n=e.props.formItem)==null?void 0:n.name,y=e.props.defaultValue;l(r,u,y)},[e.props.defaultValue]),m.useImperativeHandle(a,()=>({show(){i(!0)},hide(){i(!1)}})),f&&s.jsx(p.Item,{...e.props.formItem,"data-id":t,"data-type":r,children:s.jsx(T,{...e.props.formWrap,name:e.props.formItem.name,style:e.style})})},T=t=>{const r=t.value||"";let e=r;if(d(r))return s.jsx("span",{style:t.style,children:`\${${t.name}}`});if(t.showType==="text"&&(t.dateType&&(e=o(r).format(t.dateType)),t.numberType&&(e=h(r,t.numberType)),r!=null&&r.format&&(e=o(r).format())),t.script)try{e=new Function("value",`return (${t.script})(value);`)(e)}catch(a){console.error("脚本解析失败",a),c.error(JSON.stringify(a))}if(e=e==null?void 0:e.toString(),t.showType==="text")return s.jsx("span",{style:t.style,children:e});if(t.showType==="href")return s.jsx("a",{href:e,target:"_blank",style:t.style,children:e});if(t.showType==="image")return s.jsx(j,{src:e,style:t.style})},H=m.forwardRef(I);export{H as default};
