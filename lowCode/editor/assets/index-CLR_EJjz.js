const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PageList-MKxT-GAM.js","assets/index-DmOc0qNU.js","assets/index-Dx4TTDdD.css","assets/CreatePage-unumot6h.js","assets/project-RurpUGJo.js","assets/TextArea-D7VuO_-I.js","assets/BaseInput-4F0kfgVN.js","assets/useVariants-BdxfBOl3.js","assets/index-DOHCQObp.js","assets/index-1_6nT-oA.js","assets/row-pIc0FM19.js","assets/QuestionCircleOutlined-Dza1yYuv.js","assets/index-_pMv_sKm.js","assets/index-B-YUPJxN.js","assets/EyeInvisibleOutlined-Cl_PTdo5.js","assets/EyeOutlined-QFSiY36E.js","assets/SearchOutlined-DscCkqW9.js","assets/index-DSaINUG7.js","assets/useShowArrow-CIjY5B73.js","assets/List-BV6fBbjc.js","assets/index-wVmnK_0F.js","assets/useIcons-CLAJNkrF.js","assets/DownOutlined-DnWdyoG8.js","assets/PlusOutlined-BSTEPWl7.js","assets/SyncOutlined-D_H3wSeZ.js","assets/index-CW6BFuNZ.js","assets/extendsObject-keMuGWqj.js","assets/useBreakpoint-Dj2PHoq7.js","assets/useForceUpdate-Y5LXbfsE.js","assets/Pagination-B_kLQQfV.js","assets/DoubleRightOutlined-FRvrxn3q.js","assets/index-DFI99UhQ.js","assets/DeleteOutlined-BnUSKaGo.js","assets/EditOutlined-D6nYSc60.js","assets/OutlinePanel-D3eyYT3Y.js","assets/shallow-DkvW6rgF.js","assets/SoundOutlined-C2LYByLL.js","assets/UpOutlined-CkYvBYD1.js","assets/index-B6d_3ZHh.js","assets/conductUtil-wNhCxpcs.js","assets/PlusSquareOutlined-D0i2U-a9.js","assets/FolderOpenOutlined-Bj6jPccg.js","assets/HolderOutlined-CzOeoeCY.js","assets/index-B2mTmS5H.js","assets/index-CrdplzP2.js","assets/debounce-CoSCf5Zb.js","assets/index-D_sh-7v0.js","assets/index-Cxj_b0qa.css","assets/useDrag-1pt3QfON.js","assets/useDragDropManager-Dl0-aEZk.js","assets/index-Dg1x3Ybx.js","assets/index-Do4qj9dd.js","assets/UsergroupAddOutlined-Bx2neJ9_.js","assets/FunctionOutlined-Dm0pzJNb.js","assets/CodingPanel-DBPWRQBr.js","assets/index-sNbwzaq7.js","assets/ApiList-Dd3rGui9.js","assets/SettingModal-DRclkpPm.js","assets/VariableBind-alrlGhmD.js","assets/VsEditor-DbAzcx7k.js","assets/util-DNkFm-j2.js","assets/index-C0E5Fhz-.js","assets/_baseGet-xRkAGEE7.js","assets/NotificationOutlined-DlRBMYlM.js","assets/VariableBind-DHqZK9eU.css","assets/index-DxJl0Bxc.js","assets/index-B5-G8EA2.js","assets/InfoCircleOutlined-D9lj3ic_.js","assets/index-o7l-rjNw.js","assets/SettingOutlined-CGW_ik-t.js","assets/MemberList-CHz5G5nf.js","assets/MemberSetting-nztnsBie.js","assets/UserOutlined-DAUrDjKa.js","assets/VariableList-C5BK1dJ6.js"])))=>i.map(i=>d[i]);
import{r as i,N as j,a as w,j as e,Q as F,m as $,af as z,ag as K,_ as m,ah as V,z as B,i as P,T as k,a7 as G,P as J}from"./index-DmOc0qNU.js";import{u as Q}from"./index-CrdplzP2.js";import{g as D}from"./index-D_sh-7v0.js";import{u as U}from"./useDrag-1pt3QfON.js";import{R as M,C as N}from"./row-pIc0FM19.js";import{R as W}from"./UpOutlined-CkYvBYD1.js";import{E as A}from"./index-wVmnK_0F.js";import{T as O}from"./index-Dg1x3Ybx.js";import{I as Y}from"./index-B-YUPJxN.js";import{R as q}from"./SearchOutlined-DscCkqW9.js";import{D as H}from"./index-Do4qj9dd.js";import{R as X,a as Z,b as ee,c as te,d as ne}from"./UsergroupAddOutlined-Bx2neJ9_.js";import{R as S}from"./QuestionCircleOutlined-Dza1yYuv.js";import{R as se}from"./FunctionOutlined-Dm0pzJNb.js";const ae="_leftTool_1ltta_1",ie="_outlinePanel_1ltta_8",le="_itemContainer_1ltta_16",oe="_iconContainer_1ltta_31",re="_itemName_1ltta_50",_={leftTool:ae,outlinePanel:ie,itemContainer:le,iconContainer:oe,itemName:re},ce=n=>{const[c,b]=i.useState(j(n.type)),{selectedElement:l,elementsMap:u,addElement:E,addChildElements:C}=w(a=>({addElement:a.addElement,addChildElements:a.addChildElements,selectedElement:a.selectedElement,elementsMap:a.page.pageData.elementsMap})),[{isDragging:y},I]=U(()=>({type:"MENU_ITEM",item:{id:c,type:n.type,name:n.name},end:()=>{b(j(n.type))},collect:a=>({isDragging:a.isDragging()})}),[c]),v=async a=>{var f;const{config:p,events:x,methods:g=[],elements:t=[]}=((f=await D(a.type+"Config"))==null?void 0:f.default)||{},s=j(a.type);if(!F(a.type,l==null?void 0:l.id,l==null?void 0:l.type,u)){$.info("请把表单项放在Form容器内");return}const o=t.map(async r=>{var T;const{config:h,events:d,methods:R=[]}=((T=await D(r.type+"Config"))==null?void 0:T.default)||{};return{id:r.id||j(r.type),name:r.name,type:r.type,parentId:s,config:h,events:d,methods:R}})||[];Promise.all(o).then(r=>{l?C({type:a.type,name:a.name,elements:r,parentId:l.id,id:s,config:p,events:x,methods:g}):E({type:a.type,name:a.name,id:s,elements:r,config:p,events:x,methods:g})})};return e.jsxs("div",{className:_.itemContainer,ref:I,onClick:()=>v(n),style:{cursor:"pointer"},children:[e.jsx("div",{className:_.iconContainer,children:typeof n.icon=="string"?e.jsx("img",{src:n.icon,alt:n.name}):n.icon}),e.jsx("div",{className:_.itemName,children:n.name})]})},de=()=>{const n=i.useRef(),[c,b]=i.useState(""),[l,u]=i.useState([]),[E,C]=i.useState("system"),[y,I]=i.useState([]);i.useEffect(()=>{const t=(c?v(z,c):z).filter(s=>!s.hidden).map(s=>({key:s.type,label:s.title,children:e.jsx(M,{gutter:[10,10],children:s.data.filter(o=>!o.hidden).map(o=>e.jsx(N,{span:8,children:e.jsx(ce,{...o})},o.type))})}));u(t.map(s=>s.key)),I(t)},[c]);function v(t,s){const o=[];function f(r,h){for(const d of r)if(Array.isArray(d.data))f(d.data,{...d,data:[]});else if(d.name.includes(s)){if(h.data.push(d),o.filter(R=>R.type===h.type).length>0)continue;o.push({...h})}}return s?(f(t,null),o):t}const a=t=>{u(typeof t=="string"?[t]:t)},p=i.useMemo(()=>[{key:"system",label:"系统组件",children:e.jsxs(e.Fragment,{children:[e.jsx(K,{style:{height:y.length>0?"calc(100vh - 210px)":"",overflowY:"auto"},items:y,ghost:!0,expandIconPosition:"end",size:"small",activeKey:l,onChange:a,expandIcon:({isActive:t})=>e.jsx(W,{rotate:t?0:-180})}),y.length===0&&e.jsx(A,{image:A.PRESENTED_IMAGE_SIMPLE})]})},{key:"custom",label:"自定义组件",children:e.jsx(e.Fragment,{})}],[y,l]),x=t=>{var s;C(t),t==="custom"&&((s=n.current)==null||s.reload())},{run:g}=Q(t=>{const s=t.target.value;b(s)},{wait:500});return e.jsx(O,{size:"small",defaultActiveKey:p[0].key,tabPosition:"top",onChange:x,items:p.map(t=>({key:t.key,label:t.label,children:e.jsxs(e.Fragment,{children:[E==="system"&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{placeholder:"输入组件名称查询",suffix:e.jsx(q,{}),onChange:g}),e.jsx(H,{style:{margin:"12px 0 0 0"}})]}),t.children]})}))})},me=i.lazy(()=>m(()=>import("./PageList-MKxT-GAM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]))),ye=i.lazy(()=>m(()=>import("./OutlinePanel-D3eyYT3Y.js"),__vite__mapDeps([34,1,2,35,36,22,37,10,38,19,39,40,41,42,43,44,45,46,47,48,49,20,50,23,13,8,6,5,7,14,15,16,51,52,11,53]))),pe=i.lazy(()=>m(()=>import("./CodingPanel-DBPWRQBr.js"),__vite__mapDeps([54,1,2,55,10]))),fe=i.lazy(()=>m(()=>import("./ApiList-Dd3rGui9.js"),__vite__mapDeps([56,1,2,57,58,59,60,61,62,55,9,10,11,12,63,38,19,39,40,41,42,43,22,13,8,6,5,7,14,15,16,53,64,65,66,23,67,68,37,50,69,25,26,18,20,21,27,28,29,30,17]))),he=i.lazy(()=>m(()=>import("./MemberList-CHz5G5nf.js"),__vite__mapDeps([70,1,2,71,9,10,11,12,13,8,6,5,7,14,15,16,65,66,23,24,25,26,18,19,20,21,22,27,28,29,30,17,72]))),ue=i.lazy(()=>m(()=>import("./VariableList-C5BK1dJ6.js"),__vite__mapDeps([73,1,2,55,9,10,11,12,13,8,6,5,7,14,15,16,65,66,68,22,37,23,25,26,18,19,20,21,27,28,29,30,17]))),L=[{key:"ComponentPanel",icon:e.jsx(X,{style:{fontSize:16}}),label:"组件",title:e.jsxs(P,{children:[e.jsx("span",{children:"组件"}),e.jsx(k,{title:"无需拖拽，直接点击就能添加到画布中。",children:e.jsx(S,{})})]}),children:()=>e.jsx(de,{})},{key:"home",icon:e.jsx(G,{style:{fontSize:16}}),label:"页面",title:"页面列表",children:()=>e.jsx(me,{})},{key:"OutlinePanel",icon:e.jsx(Z,{style:{fontSize:16}}),label:"大纲",title:e.jsxs(P,{children:[e.jsx("span",{children:"页面大纲"}),e.jsx(k,{title:"组件支持拖拽排序",children:e.jsx(S,{})})]}),children:()=>e.jsx(ye,{})},{key:"CodingPanel",icon:e.jsx(ee,{style:{fontSize:16}}),label:"代码",title:"页面JSON",children:()=>e.jsx(pe,{})},{key:"ApiList",icon:e.jsx(te,{style:{fontSize:16}}),label:"接口",title:"页面接口",children:()=>e.jsx(fe,{})},{key:"Variable",icon:e.jsx(se,{style:{fontSize:16}}),label:"变量",title:"页面变量",children:()=>e.jsx(ue,{})},{key:"Member",icon:e.jsx(ne,{style:{fontSize:16}}),label:"成员",title:e.jsxs(P,{children:[e.jsx("span",{children:"页面成员"}),e.jsx(J,{style:{padding:0},content:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"1. 公开页面，所有人均可访问，但无法编辑。"}),e.jsx("p",{children:"2. 只有开发者才可修改页面。"}),e.jsx("p",{children:"3. 私有页面只有添加开发者或体验者才可访问。"})]}),title:"页面权限",placement:"right",children:e.jsx(S,{})})]}),children:()=>e.jsx(he,{})}],xe=()=>e.jsx(e.Fragment,{children:e.jsx(O,{size:"small",defaultActiveKey:L[0].key,tabPosition:"left",tabBarStyle:{width:50,height:"calc(100vh - 64px)"},className:_.leftTool,centered:!0,items:L.map(n=>{var c;return{key:n.key,label:e.jsxs(V,{vertical:!0,justify:"center",align:"center",gap:5,children:[n.icon,e.jsx("span",{style:{fontSize:12},children:n.label})]}),children:e.jsxs("div",{style:{marginLeft:-10,marginRight:10},children:[e.jsx(M,{style:{height:46},align:"middle",justify:"space-between",children:e.jsx(N,{children:e.jsx("span",{style:{fontWeight:"bold"},children:n.title})})}),e.jsx(i.Suspense,{fallback:e.jsx(B,{}),children:(c=n.children)==null?void 0:c.call(n)})]})}})})}),De=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{De as i,_ as s};
